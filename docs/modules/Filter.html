<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Erlib Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>ldoc</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Simple">Simple </a></li>
<li><a href="#Factory">Factory </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/Core.html">Core</a></li>
  <li><a href="../modules/Types.html">Types</a></li>
  <li><a href="../modules/Concepts.html">Concepts</a></li>
  <li><a href="../modules/Cache.html">Cache</a></li>
  <li><a href="../modules/Data.html">Data</a></li>
  <li><a href="../modules/Template.html">Template</a></li>
  <li><a href="../modules/Entity.html">Entity</a></li>
  <li><a href="../modules/EventManager.html">EventManager</a></li>
  <li><a href="../modules/EventManagerLite.html">EventManagerLite</a></li>
  <li><a href="../modules/Force.html">Force</a></li>
  <li><a href="../modules/Gui.html">Gui</a></li>
  <li><a href="../modules/Locale.html">Locale</a></li>
  <li><a href="../modules/Player.html">Player</a></li>
  <li><a href="../modules/PluginManagerLite.html">PluginManagerLite</a></li>
  <li><a href="../modules/Remote.html">Remote</a></li>
  <li><a href="../modules/Setting.html">Setting</a></li>
  <li><a href="../modules/Stacktrace.html">Stacktrace</a></li>
  <li><a href="../modules/Train.html">Train</a></li>
  <li><a href="../modules/Wube.html">Wube</a></li>
  <li><a href="../modules/Array.html">Array</a></li>
  <li><a href="../modules/Class.html">Class</a></li>
  <li><a href="../modules/Coding.html">Coding</a></li>
  <li><a href="../modules/Color.html">Color</a></li>
  <li><a href="../modules/Compare.html">Compare</a></li>
  <li><a href="../modules/Debug.html">Debug</a></li>
  <li><a href="../modules/Error.html">Error</a></li>
  <li><strong>Filter</strong></li>
  <li><a href="../modules/Iter.html">Iter</a></li>
  <li><a href="../modules/Lambda.html">Lambda</a></li>
  <li><a href="../modules/LocalisedString.html">LocalisedString</a></li>
  <li><a href="../modules/Lock.html">Lock</a></li>
  <li><a href="../modules/Log.html">Log</a></li>
  <li><a href="../modules/Logic.html">Logic</a></li>
  <li><a href="../modules/Math.html">Math</a></li>
  <li><a href="../modules/Meta.html">Meta</a></li>
  <li><a href="../modules/Polygon.html">Polygon</a></li>
  <li><a href="../modules/Replicate.html">Replicate</a></li>
  <li><a href="../modules/Set.html">Set</a></li>
  <li><a href="../modules/String.html">String</a></li>
  <li><a href="../modules/Table.html">Table</a></li>
  <li><a href="../modules/Time.html">Time</a></li>
  <li><a href="../modules/Tool.html">Tool</a></li>
  <li><a href="../modules/Vector.html">Vector</a></li>
  <li><a href="../modules/Verificate.html">Verificate</a></li>
  <li><a href="../modules/Version.html">Version</a></li>
  <li><a href="../modules/remotes.html">remotes</a></li>
  <li><a href="../modules/snippet.html">snippet</a></li>
  <li><a href="../modules/Babelfish.html">Babelfish</a></li>
</ul>
<h2>Source</h2>
<ul class="nowrap">
  <li><a href="../source/Introduction.html">Introduction</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Filter</code></h1>
<p>Some simple filter functions.</p>
<p> <a href="../source/Introduction.html#DevelopmentStatus">Module Status</a>: Polishing.
 <a href="../source/Introduction.html#Compatibility">Compatibility</a>: Pure Lua.</p>
    <h3>Usage:</h3>
    <ul>
        <pre class="example">local Filter = require(&apos;__eradicators-library__/erlib/lua/Filter&apos;)()
</pre>
    </ul>


<h2><a href="#Simple">Simple </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#SKIP">SKIP</a></td>
	<td class="summary">No-Op, does nothing at all.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#TRUE">TRUE()</a></td>
	<td class="summary">Always returns boolean true.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#FALSE">FALSE()</a></td>
	<td class="summary">Always returns boolean false.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VALID">VALID(obj)</a></td>
	<td class="summary">Returns obj.valid, the validity of factorio LuaObjects.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#INVALID">INVALID(obj)</a></td>
	<td class="summary">Returns true for factorio LuaObjects that are <strong>not</strong> valid.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#PASS">PASS(obj)</a></td>
	<td class="summary">Returns the object given.</td>
	</tr>
</table>
<h2><a href="#Factory">Factory </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#string_prefix">string_prefix(prefix)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#string_postfix">string_postfix(postfix)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#string_infix">string_infix(infix)</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#string_pattern">string_pattern(pattern[, init=1])</a></td>
	<td class="summary">

</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#true_object_array">true_object_array(sarr)</a></td>
	<td class="summary">Whitelist / Allowlist.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#false_object_array">false_object_array(sarr)</a></td>
	<td class="summary">Blacklist / Blocklist.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#table_value">table_value(TableValueFilterSpecification)</a></td>
	<td class="summary">Generates generalized table filter functions.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#chain">chain(RecursiveFilterChainSpecification)</a></td>
	<td class="summary">Composes multiple filters into one.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Simple"></a>Simple </h2>

    <dl class="function">
    <dt>
    <a name = "SKIP"></a>
    <strong>SKIP</strong>
    </dt>
    <dd>
    No-Op, does nothing at all.







</dd>
    <dt>
    <a name = "TRUE"></a>
    <strong>TRUE()</strong>
    </dt>
    <dd>
    Always returns boolean true.







</dd>
    <dt>
    <a name = "FALSE"></a>
    <strong>FALSE()</strong>
    </dt>
    <dd>
    Always returns boolean false.







</dd>
    <dt>
    <a name = "VALID"></a>
    <strong>VALID(obj)</strong>
    </dt>
    <dd>
    Returns obj.valid, the validity of factorio LuaObjects.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">obj</span>
            <span class="types"><a class="type" href="../api/LuaObject.html">LuaObject</a></span>



        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> k,entity <span class="keyword">in</span> Iter.filtered_pairs(entities,Filter.VALID) <span class="keyword">do</span>
  <span class="global">print</span>(entity.name,<span class="string">'is valid!'</span>)
  <span class="keyword">end</span>
</pre>
    </ul>

</dd>
    <dt>
    <a name = "INVALID"></a>
    <strong>INVALID(obj)</strong>
    </dt>
    <dd>
    Returns true for factorio LuaObjects that are <strong>not</strong> valid.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">obj</span>
            <span class="types"><a class="type" href="../api/LuaObject.html">LuaObject</a></span>



        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> k,entity <span class="keyword">in</span> Iter.filtered_pairs(entities,Filter.INVALID) <span class="keyword">do</span>
  <span class="global">print</span>(k,<span class="string">'is not valid anymore!'</span>)
  <span class="keyword">end</span>
</pre>
    </ul>

</dd>
    <dt>
    <a name = "PASS"></a>
    <strong>PASS(obj)</strong>
    </dt>
    <dd>
    Returns the object given.  For when the syntax requires a function but
 you don't want to actually change the object.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">obj</span>
            <span class="types"><a class="type" href="../modules/Types.html#AnyValue">AnyValue</a></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="../modules/Types.html#AnyValue">AnyValue</a></span>
        obj
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Factory"></a>Factory </h2>

    <dl class="function">
    <dt>
    <a name = "string_prefix"></a>
    <strong>string_prefix(prefix)</strong>
    </dt>
    <dd>





    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">prefix</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-string">string</a></span>
         The exact plain prefix to look for. Not a lua pattern.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         The filter function f(str) returns true if <strong>str starts with</strong>
 the prefix.
    </ol>




</dd>
    <dt>
    <a name = "string_postfix"></a>
    <strong>string_postfix(postfix)</strong>
    </dt>
    <dd>





    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">postfix</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-string">string</a></span>
         The exact plain postfix to look for. Not a lua pattern.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         The filter function f(str) returns true if <strong>str ends with</strong>
 the postfix.
    </ol>




</dd>
    <dt>
    <a name = "string_infix"></a>
    <strong>string_infix(infix)</strong>
    </dt>
    <dd>





    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">infix</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-string">string</a></span>
         The exact plain infix to look for. Not a lua pattern.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         The filter function f(str) returns true if <strong>str contains</strong>
 the infix.
    </ol>




</dd>
    <dt>
    <a name = "string_pattern"></a>
    <strong>string_pattern(pattern[, init=1])</strong>
    </dt>
    <dd>





    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pattern</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-string">string</a></span>
         A lua string <a href="../modules/Types.html#Pattern">Pattern</a>.
        </li>
        <li><span class="parameter">init</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         The position at which to start the search
         (<em>default</em> 1)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         The filter function f(str) returns true if the pattern
 matches the string.
    </ol>




</dd>
    <dt>
    <a name = "true_object_array"></a>
    <strong>true_object_array(sarr)</strong>
    </dt>
    <dd>
    Whitelist / Allowlist.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">sarr</span>
            <span class="types"><a class="type" href="../modules/Types.html#SparseArray">SparseArray</a></span>
         A list of objects that should return <a href="../modules/Types.html#true">true</a> when
 passed to the filter. All other objects will return <a href="../modules/Types.html#false">false</a>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
        The filter function f(obj) returns a <a href="../api/Builtin-Types.html#boolean">boolean</a>.
    </ol>




</dd>
    <dt>
    <a name = "false_object_array"></a>
    <strong>false_object_array(sarr)</strong>
    </dt>
    <dd>
    Blacklist / Blocklist.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">sarr</span>
            <span class="types"><a class="type" href="../modules/Types.html#SparseArray">SparseArray</a></span>
         A list of objects that should return <a href="../modules/Types.html#false">false</a> when
 passed to the filter. All other objects will return <a href="../modules/Types.html#true">true</a>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
        The filter function f(obj) returns a <a href="../api/Builtin-Types.html#boolean">boolean</a>.
    </ol>




</dd>
    <dt>
    <a name = "table_value"></a>
    <strong>table_value(TableValueFilterSpecification)</strong>
    </dt>
    <dd>
    Generates generalized table filter functions. </p>

<p> The TableValueFilterSpecification must contain either "is" or "has" but not both.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">TableValueFilterSpecification</span>


        <ul>
        <li><span class="parameter">...</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-string">string</a> or <a class="type" href="https://www.lua.org/pil/2.3.html">number</a></span>
         The DenseArray part
 of a TableValueFilterSpecification is a <a href="../modules/Table.html#TablePath">TablePath</a>.
        </li>
        <li><span class="parameter">is</span>
            <span class="types"><a class="type" href="../modules/Types.html#NotNil">NotNil</a> or <a class="type" href="../modules/Types.html#DenseArray">DenseArray</a></span>
         If this is a
 DenseArray then the filter will return true if the value at the above given
 path in the table is equal to any of the values in the array. For convenience
 if you're only looking for a single target value you can give it directly
 without putting it in a table.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">has</span>
            <span class="types"><a class="type" href="../modules/Types.html#DenseArray">DenseArray</a></span>
         Configures the filter
 to look for values in the subtable found in the filtered object at the given
 path. The [1] key in this array specifies the comparision mode and must be
 a literal string 'or','nor','and' or 'nand'.
 All elements [2] to [n] represent the
 accepted values in the subtable. When no accepted values are given
 'and' is always true and 'or' is always false.
         (<em>optional</em>)
        </li>
        </li></ul>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         The TableValueFilter function f(tbl). Calling f with anything that
 is not a table will always return false.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> tblA = {keyA = {keyB = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>}, keyC = <span class="number">1</span>}}
<span class="keyword">local</span> tblB = {keyA = {keyB = {<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>}}}

<span class="comment">-- "is" is an exact comparision
</span><span class="global">print</span>(Filter.table_value {<span class="string">'keyA'</span>,<span class="string">'keyB'</span>,is  =  <span class="number">1</span>         } (tblA) )
&gt; <span class="keyword">false</span>
<span class="global">print</span>(Filter.table_value {<span class="string">'keyA'</span>,<span class="string">'keyC'</span>,is  =  <span class="number">1</span>         } (tblA) )
&gt; <span class="keyword">true</span>

<span class="comment">-- "and" must have all elements given
</span><span class="global">print</span>(Filter.table_value {<span class="string">'keyA'</span>,<span class="string">'keyB'</span>,has = {<span class="string">'and'</span>,<span class="number">1</span>,<span class="number">2</span>}} (tblA) )
&gt; <span class="keyword">true</span>
<span class="global">print</span>(Filter.table_value {<span class="string">'keyA'</span>,<span class="string">'keyB'</span>,has = {<span class="string">'and'</span>,<span class="number">2</span>,<span class="number">3</span>}} (tblB) )
&gt; <span class="keyword">false</span>

<span class="comment">-- "or" needs only one element
</span><span class="global">print</span>(Filter.table_value {<span class="string">'keyA'</span>,<span class="string">'keyB'</span>,has = {<span class="string">'or'</span> ,<span class="number">1</span>,<span class="number">6</span>}} (tblA) )
&gt; <span class="keyword">true</span>
<span class="global">print</span>(Filter.table_value {<span class="string">'keyA'</span>,<span class="string">'keyB'</span>,has = {<span class="string">'or'</span> ,<span class="number">1</span>,<span class="number">6</span>}} (tblB) )
&gt; <span class="keyword">true</span>
</pre>
    </ul>

</dd>
    <dt>
    <a name = "chain"></a>
    <strong>chain(RecursiveFilterChainSpecification)</strong>
    </dt>
    <dd>
    Composes multiple filters into one.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">RecursiveFilterChainSpecification</span>


        <ul>
        <li><span class="parameter">1</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-string">string</a></span>
         How the filters should be combined. Must be one of the
 literal combination mode strings "and", "nand", "or" or "nor".
        </li>
        <li><span class="parameter">...</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a> or <a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         The filters to be combined. Each value can be either a custom filter
 function f(obj), a <a href="../modules/Filter.html#table_value">TableValueFilterSpecification</a>
 or another RecursiveFilterChainSpecification.</p>

<p> <strong>Note:</strong> The first path key in an in-line TableValueFilterSpecification
 can not be a filter chain combination mode string ("and", "or", etc.).
 Cou have to pre-compile the TableValueFilter in that case.
        </li>
        </li></ul>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> f = Filter.chain { <span class="comment">-- RecursiveFilterChainSpecification
</span>  <span class="string">'or'</span>,
  <span class="keyword">function</span>(x) <span class="keyword">return</span> (<span class="global">type</span>(x) == <span class="string">'number'</span>) <span class="keyword">and</span> (x &gt; <span class="number">5</span>) <span class="keyword">end</span>, <span class="comment">-- custom function
</span>  { <span class="comment">-- another RecursiveFilterChainSpecification
</span>    <span class="string">'and'</span>,
    {<span class="string">'number'</span>, is ={<span class="number">5</span>,<span class="number">42</span>} },                   <span class="comment">-- TableValueFilterSpecification
</span>    {<span class="string">'names'</span> , has={<span class="string">'or'</span>,<span class="string">'Michiko'</span>,<span class="string">'Tarou'</span>} }, <span class="comment">-- TableValueFilterSpecification
</span>    }
  }
<span class="global">print</span>( f(<span class="number">5</span>) ) <span class="comment">-- not x &gt; 5
</span>&gt; <span class="keyword">false</span>
<span class="global">print</span>( f(<span class="number">6</span>) ) <span class="comment">-- x &gt; 5
</span>&gt; <span class="keyword">true</span>
<span class="global">print</span>( f{number = <span class="number">5</span> , names = {<span class="string">'Mamoru'</span> } } ) <span class="comment">-- wrong name
</span>&gt; <span class="keyword">false</span>
<span class="global">print</span>( f{number = <span class="number">42</span>, names = {<span class="string">'Michiko'</span>} } ) <span class="comment">-- number and name ok
</span>&gt; <span class="keyword">true</span>
</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2021-07-05 05:46:01 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
