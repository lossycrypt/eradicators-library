<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Erlib Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>ldoc</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Todo">Todo </a></li>
<li><a href="#lua_Iter_array_pairs_Functions">lua.Iter.array_pairs Functions</a></li>
<li><a href="#lua_Iter_combinations_Functions">lua.Iter.combinations Functions</a></li>
<li><a href="#lua_Iter_dpairs_Functions">lua.Iter.dpairs Functions</a></li>
<li><a href="#lua_Iter_filter_pairs_Functions">lua.Iter.filter_pairs Functions</a></li>
<li><a href="#lua_Iter_ntuples_Functions">lua.Iter.ntuples Functions</a></li>
<li><a href="#lua_Iter_permutations_Functions">lua.Iter.permutations Functions</a></li>
<li><a href="#lua_Iter_sriapi_Functions">lua.Iter.sriapi Functions</a></li>
<li><a href="#lua_Iter_subsets_Functions">lua.Iter.subsets Functions</a></li>
<li><a href="#lua_Iter_sync_tuples_Functions">lua.Iter.sync_tuples Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/Core.html">Core</a></li>
  <li><a href="../modules/Types.html">Types</a></li>
  <li><a href="../modules/Concepts.html">Concepts</a></li>
  <li><a href="../modules/Cache.html">Cache</a></li>
  <li><a href="../modules/Data.html">Data</a></li>
  <li><a href="../modules/Template.html">Template</a></li>
  <li><a href="../modules/Entity.html">Entity</a></li>
  <li><a href="../modules/EventManager.html">EventManager</a></li>
  <li><a href="../modules/EventManagerLite.html">EventManagerLite</a></li>
  <li><a href="../modules/Force.html">Force</a></li>
  <li><a href="../modules/Gui.html">Gui</a></li>
  <li><a href="../modules/Locale.html">Locale</a></li>
  <li><a href="../modules/Player.html">Player</a></li>
  <li><a href="../modules/PluginManager.html">PluginManager</a></li>
  <li><a href="../modules/PluginManagerLite.html">PluginManagerLite</a></li>
  <li><a href="../modules/Remote.html">Remote</a></li>
  <li><a href="../modules/Setting.html">Setting</a></li>
  <li><a href="../modules/Stacktrace.html">Stacktrace</a></li>
  <li><a href="../modules/Train.html">Train</a></li>
  <li><a href="../modules/Array.html">Array</a></li>
  <li><a href="../modules/Class.html">Class</a></li>
  <li><a href="../modules/Coding.html">Coding</a></li>
  <li><a href="../modules/Color.html">Color</a></li>
  <li><a href="../modules/Compare.html">Compare</a></li>
  <li><a href="../modules/Debug.html">Debug</a></li>
  <li><a href="../modules/Error.html">Error</a></li>
  <li><a href="../modules/Filter.html">Filter</a></li>
  <li><strong>Iter</strong></li>
  <li><a href="../modules/Lambda.html">Lambda</a></li>
  <li><a href="../modules/LocalisedString.html">LocalisedString</a></li>
  <li><a href="../modules/Lock.html">Lock</a></li>
  <li><a href="../modules/Log.html">Log</a></li>
  <li><a href="../modules/Logic.html">Logic</a></li>
  <li><a href="../modules/Math.html">Math</a></li>
  <li><a href="../modules/Meta.html">Meta</a></li>
  <li><a href="../modules/Polygon.html">Polygon</a></li>
  <li><a href="../modules/Replicate.html">Replicate</a></li>
  <li><a href="../modules/Set.html">Set</a></li>
  <li><a href="../modules/String.html">String</a></li>
  <li><a href="../modules/Table.html">Table</a></li>
  <li><a href="../modules/Time.html">Time</a></li>
  <li><a href="../modules/Tool.html">Tool</a></li>
  <li><a href="../modules/Vector.html">Vector</a></li>
  <li><a href="../modules/Verificate.html">Verificate</a></li>
  <li><a href="../modules/Version.html">Version</a></li>
  <li><a href="../modules/remotes.html">remotes</a></li>
  <li><a href="../modules/snippet.html">snippet</a></li>
  <li><a href="../modules/Babelfish.html">Babelfish</a></li>
</ul>
<h2>Source</h2>
<ul class="nowrap">
  <li><a href="../source/Introduction.html">Introduction</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Iter</code></h1>
<p>Specialized iteration of tables and other objects.</p>
<p> "pairs" methods take a single input table.
 "touples" methods take an arbitrary number of tables.</p>

<p> <a href="../source/Introduction.html#DevelopmentStatus">Module Status</a>: Experimental 2020-10-31.</p>
    <h3>Usage:</h3>
    <ul>
        <pre class="example">local Iter = require(&apos;__eradicators-library__/erlib/lua/Iter&apos;)()
</pre>
    </ul>


<h2><a href="#Todo">Todo </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#todo-1">todo-1</a></td>
	<td class="summary">Find out how to make LDoc obey custom names for
 sections and iterators.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_array_pairs_Functions">lua.Iter.array_pairs Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#array_pairs">array_pairs(tbl, i, j)</a></td>
	<td class="summary">Iterates over dense, sparse or partial arrays.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_combinations_Functions">lua.Iter.combinations Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#combinations">combinations(length, arr)</a></td>
	<td class="summary">Iterates over all n-length combinations of the given values.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_dpairs_Functions">lua.Iter.dpairs Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#dpairs">dpairs([tbl[, opt]])</a></td>
	<td class="summary">Deep_pairs iterates all sub-tables in a single for-loop.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_filter_pairs_Functions">lua.Iter.filter_pairs Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#filter_pairs">filter_pairs(tbl, f)</a></td>
	<td class="summary">Returns only <a href="../modules/Types.html#KeyValuePair">(key → value)</a> pairs for which f(value,key,tbl) returns true.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_ntuples_Functions">lua.Iter.ntuples Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#ntuples">ntuples(n[, tbl])</a></td>
	<td class="summary">Iterates n-nested sub-tables in a single for-loop.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_permutations_Functions">lua.Iter.permutations Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#permutations">permutations([arr[, i=1[, j=#arr]]])</a></td>
	<td class="summary">Iterates through all permutations that contain each value exactly once.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_sriapi_Functions">lua.Iter.sriapi Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#sriapi">sriapi(arr)</a></td>
	<td class="summary">Inverse <a href="../lua-5.2/doc/manual.html#pdf-ipairs">ipairs()</a>.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_subsets_Functions">lua.Iter.subsets Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#subsets">subsets(size, arr)</a></td>
	<td class="summary">Produces all possible unique subsets of size n from a given superset arr.</td>
	</tr>
</table>
<h2><a href="#lua_Iter_sync_tuples_Functions">lua.Iter.sync_tuples Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#sync_tuples">sync_tuples(parent, ...)</a></td>
	<td class="summary">Iterates multiple tables in paralell.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Todo"></a>Todo </h2>

    <dl class="function">
    <dt>
    <a name = "todo-1"></a>
    <strong>todo-1</strong>
    </dt>
    <dd>
    Find out how to make LDoc obey custom names for
 sections and iterators.


    <ul>
        <li><span class="parameter">todo</span>
        -1
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_array_pairs_Functions"></a>lua.Iter.array_pairs Functions</h2>

    <dl class="function">
    <dt>
    <a name = "array_pairs"></a>
    <strong>array_pairs(tbl, i, j)</strong>
    </dt>
    <dd>
    Iterates over dense, sparse or partial arrays.
 Can also iterate over the array part of a <a href="../modules/Types.html#MixedTable">MixedTable</a>.
 Start and end point of the array are determind on calling, thus any changes
 to the array during the iteration have no effect on the interation range.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tbl</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a> or <a class="type" href="../modules/Types.html#array">array</a></span>



        </li>
        <li><span class="parameter">i</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         Start of the iteration range.
        </li>
        <li><span class="parameter">j</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         End of the iteration range.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         A <a href="../lua-5.2/doc/manual.html#pdf-next">next</a>-style iterator that returns (index,value) pairs
 when called with (tbl,last_key).
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> my_mixed_table = {<span class="string">'a'</span>,[<span class="number">42</span>]=<span class="string">'u'</span>,[<span class="number">6</span>]=<span class="string">'f'</span>,test=<span class="string">'bla'</span>}

<span class="comment">-- By default it will find the largest key on it's own.
</span><span class="keyword">for</span> k,v <span class="keyword">in</span> Iter.array_pairs(my_mixed_table) <span class="keyword">do</span> <span class="global">print</span>(k,v) <span class="keyword">end</span>
&gt; <span class="number">1</span> a
&gt; <span class="number">6</span> f
&gt; <span class="number">42</span> u

<span class="comment">-- You can enforce partial ranges. This *will* iterate the whole range
</span><span class="comment">-- even if only a few keys have values. So speficying huge numbers
</span><span class="comment">-- will just pointlessly waste CPU cycles.
</span><span class="keyword">for</span> k,v <span class="keyword">in</span> Iter.array_pairs(my_mixed_table,<span class="number">6</span>,<span class="number">9001</span>) <span class="keyword">do</span> <span class="global">print</span>(k,v) <span class="keyword">end</span>
&gt; <span class="number">6</span> f
&gt; <span class="number">42</span> u
</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_combinations_Functions"></a>lua.Iter.combinations Functions</h2>

    <dl class="function">
    <dt>
    <a name = "combinations"></a>
    <strong>combinations(length, arr)</strong>
    </dt>
    <dd>
    Iterates over all n-length combinations of the given values.
 Each value can be in the combination multiple times.</p>

<p> <strong>Time complexity:</strong> Size of arr to the power of length → #arr ^ length</p>

<p> <strong>See also:</strong> <a href="../modules/Iter.html#subsets">Iter.subsets</a>, <a href="../modules/Iter.html#permutations">Iter.permutations</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">length</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         The exact length of every combination.
        </li>
        <li><span class="parameter">arr</span>
            <span class="types"><a class="type" href="../modules/Types.html#DenseArray">DenseArray</a> or <a class="type" href="../modules/Types.html#SparseArray">SparseArray</a></span>
         The values to be combined.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         A stateful iterator that returns an array for each
 combination.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> arr <span class="keyword">in</span> Iter.combinations(<span class="number">3</span>,{<span class="number">0</span>,<span class="number">1</span>}) <span class="keyword">do</span> <span class="global">print</span>(Hydra.line(arr)) <span class="keyword">end</span>
&gt; {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>}
&gt; {<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>}
&gt; {<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>}
&gt; {<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>}
&gt; {<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>}
&gt; {<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>}
&gt; {<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>}
&gt; {<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>}
</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_dpairs_Functions"></a>lua.Iter.dpairs Functions</h2>

    <dl class="function">
    <dt>
    <a name = "dpairs"></a>
    <strong>dpairs([tbl[, opt]])</strong>
    </dt>
    <dd>
    Deep_pairs iterates all sub-tables in a single for-loop. </p>

<p>This is a non-fixed-path-length fork of <a href="../modules/Iter.html#ntuples">Iter.ntuples</a>.</p>

<p>With default options every <a href="../modules/Types.html#KeyValuePair">(key → value)</a> pair is iterated exactly once.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tbl</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a></span>
         The input table.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">opt</span> (<a href="../lua-5.2/doc/manual.html#pdf-table">table</a>) Options (<em>optional</em>).
        <ul>
        <li><span class="parameter">include_path</span>
            <span class="types"><a class="type" href="../api/Builtin-Types.html#boolean">boolean</a></span>
         Activates the fourth return value.
         (<em>default</em> false)
        </li>
        <li><span class="parameter">include_duplicates</span>
            <span class="types"><a class="type" href="../api/Builtin-Types.html#boolean">boolean</a></span>
         When this is false and @tbl
has multiple references to the same sub-table, then only the first reference
to each sub-table will be iterated and all futher reference skipped. When
this is true all references will be iterated normally and the fifth return
value will be true for all iterations except the first.
         (<em>default</em> false)
        </li>
        <li><span class="parameter">ignore_recursion</span>
            <span class="types"><a class="type" href="../api/Builtin-Types.html#boolean">boolean</a></span>
         Silently skip recursive
sub-tables instead of raising an error.
         (<em>default</em> false)
        </li>
        </li></ul>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="../modules/Types.html#NotNil">NotNil</a></span>
        <code>key</code></li>
        <li>
           <span class="types"><a class="type" href="../modules/Types.html#NotNil">NotNil</a></span>
        <code>value</code></li>
        <li>
           <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a></span>
        <code>table </code> This is the sub-table that contains the returned <a href="../modules/Types.html#KeyValuePair">(key → value)</a> pair.</li>
        <li>
           <span class="types"><a class="type" href="../modules/Table.html#TablePath">TablePath</a> or <a class="type" href="https://www.lua.org/pil/2.1.html">nil</a></span>
        <code>path</code> This is the full path to the value
inside the input table @tbl.</li>
        <li>
           <span class="types"><a class="type" href="../api/Builtin-Types.html#boolean">boolean</a> or <a class="type" href="https://www.lua.org/pil/2.1.html">nil</a></span>
        <code>is_duplicate</code></li>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <li><pre class="example"><span class="comment">-- Setup the example data.
</span><span class="keyword">local</span> players = {
  yurie = {
    items = {<span class="string">'iron-plate'</span>, <span class="string">'copper-plate'</span>},
    ammo  = {<span class="string">'piercing'</span>  , <span class="string">'uranium'</span>     },
    play_time = <span class="number">9001</span>,
    },
  tarou = {
    items = {<span class="string">'iron-gear'</span> , <span class="string">'copper-gear'</span> },
    ammo  = {},
    play_time = <span class="number">42</span>,
    },
  akira = {
    items = {},
    ammo  = {<span class="string">'exploding'</span> , <span class="string">'magic'</span>       },
    play_time = <span class="number">7</span>,
    },
  }

<span class="comment">-- Introduce some duplicate table references.
</span>players.michiru           = players.tarou
players.akira.ammo[<span class="string">'ref'</span>] = players.yurie.ammo

<span class="comment">-- And an easy to read format.
</span><span class="keyword">local</span> <span class="keyword">function</span> format_row(key, value, path, is_duplicate)
  <span class="keyword">return</span> (<span class="string">'%-28s %-10s %-13s %-5s'</span>)
    :format(Hydra.line(path), key, value, is_duplicate <span class="keyword">and</span> <span class="string">'(duplicate)'</span> <span class="keyword">or</span> <span class="string">''</span>)
  <span class="keyword">end</span>
</pre></li>
        <li><pre class="example"><span class="comment">-- Example 1: Path. (Also notice that duplicates are ignored by default.)
</span>
  <span class="keyword">for</span> key, value, tbl, path <span class="keyword">in</span>
    Iter.dpairs(players, {include_path = <span class="keyword">true</span>}) <span class="keyword">do</span>
    <span class="global">print</span>(format_row(key, value, path))
    <span class="keyword">end</span>

<span class="comment">--[path]                       [key]      [value]
</span>&gt; {<span class="string">"michiru"</span>, <span class="string">"items"</span>, <span class="number">1</span>}      <span class="number">1</span>          iron-gear
&gt; {<span class="string">"michiru"</span>, <span class="string">"items"</span>, <span class="number">2</span>}      <span class="number">2</span>          copper-gear
&gt; {<span class="string">"michiru"</span>, <span class="string">"play_time"</span>}     play_time  <span class="number">42</span>
&gt; {<span class="string">"akira"</span>, <span class="string">"ammo"</span>, <span class="number">1</span>}         <span class="number">1</span>          exploding
&gt; {<span class="string">"akira"</span>, <span class="string">"ammo"</span>, <span class="number">2</span>}         <span class="number">2</span>          magic
&gt; {<span class="string">"akira"</span>, <span class="string">"play_time"</span>}       play_time  <span class="number">7</span>
&gt; {<span class="string">"yurie"</span>, <span class="string">"ammo"</span>, <span class="number">1</span>}         <span class="number">1</span>          piercing
&gt; {<span class="string">"yurie"</span>, <span class="string">"ammo"</span>, <span class="number">2</span>}         <span class="number">2</span>          uranium
&gt; {<span class="string">"yurie"</span>, <span class="string">"items"</span>, <span class="number">1</span>}        <span class="number">1</span>          iron-plate
&gt; {<span class="string">"yurie"</span>, <span class="string">"items"</span>, <span class="number">2</span>}        <span class="number">2</span>          copper-plate
&gt; {<span class="string">"yurie"</span>, <span class="string">"play_time"</span>}       play_time  <span class="number">9001</span>
</pre></li>
        <li><pre class="example"><span class="comment">-- Example 2: Duplicates.
</span>
<span class="keyword">for</span> key, value, tbl, path, is_duplicate <span class="keyword">in</span>
  Iter.dpairs(players, {include_path = <span class="keyword">true</span>, include_duplicates=<span class="keyword">true</span>}) <span class="keyword">do</span>
  <span class="global">print</span>(format_row(key, value, path, is_duplicate))
  <span class="keyword">end</span>

<span class="comment">--[path]                       [key]      [value]
</span>&gt; {<span class="string">"michiru"</span>, <span class="string">"items"</span>, <span class="number">1</span>}      <span class="number">1</span>          iron-gear
&gt; {<span class="string">"michiru"</span>, <span class="string">"items"</span>, <span class="number">2</span>}      <span class="number">2</span>          copper-gear
&gt; {<span class="string">"michiru"</span>, <span class="string">"play_time"</span>}     play_time  <span class="number">42</span>
&gt; {<span class="string">"akira"</span>, <span class="string">"ammo"</span>, <span class="number">1</span>}         <span class="number">1</span>          exploding
&gt; {<span class="string">"akira"</span>, <span class="string">"ammo"</span>, <span class="number">2</span>}         <span class="number">2</span>          magic
&gt; {<span class="string">"akira"</span>, <span class="string">"ammo"</span>, <span class="string">"ref"</span>, <span class="number">1</span>}  <span class="number">1</span>          piercing      <span class="comment">-- notice pairs-based
</span>&gt; {<span class="string">"akira"</span>, <span class="string">"ammo"</span>, <span class="string">"ref"</span>, <span class="number">2</span>}  <span class="number">2</span>          uranium       <span class="comment">-- random order
</span>&gt; {<span class="string">"akira"</span>, <span class="string">"play_time"</span>}       play_time  <span class="number">7</span>
&gt; {<span class="string">"yurie"</span>, <span class="string">"ammo"</span>, <span class="number">1</span>}         <span class="number">1</span>          piercing      (duplicate)
&gt; {<span class="string">"yurie"</span>, <span class="string">"ammo"</span>, <span class="number">2</span>}         <span class="number">2</span>          uranium       (duplicate)
&gt; {<span class="string">"yurie"</span>, <span class="string">"items"</span>, <span class="number">1</span>}        <span class="number">1</span>          iron-plate
&gt; {<span class="string">"yurie"</span>, <span class="string">"items"</span>, <span class="number">2</span>}        <span class="number">2</span>          copper-plate
&gt; {<span class="string">"yurie"</span>, <span class="string">"play_time"</span>}       play_time  <span class="number">9001</span>
&gt; {<span class="string">"tarou"</span>, <span class="string">"items"</span>, <span class="number">1</span>}        <span class="number">1</span>          iron-gear     (duplicate)
&gt; {<span class="string">"tarou"</span>, <span class="string">"items"</span>, <span class="number">2</span>}        <span class="number">2</span>          copper-gear   (duplicate)
&gt; {<span class="string">"tarou"</span>, <span class="string">"play_time"</span>}       play_time  <span class="number">42</span>            (duplicate)

</pre></li>
        <li><pre class="example"><span class="comment">-- Example 3: Recursion.
</span>
<span class="comment">-- Let's introduce a loop...
</span>players.tarou.loop = players

<span class="comment">-- and try the same command as in Example 2...
</span><span class="keyword">for</span> key, value, tbl, path, is_duplicate <span class="keyword">in</span>
  Iter.dpairs(players, {include_path = <span class="keyword">true</span>, include_duplicates=<span class="keyword">true</span>}) <span class="keyword">do</span>
  <span class="global">print</span>(format_row(key, value, path, is_duplicate))
  <span class="keyword">end</span>

&gt; Error!
&gt; Table recursion detected but now allowed.
&gt; path: {<span class="string">"michiru"</span>, <span class="string">"loop"</span>}

<span class="comment">-- Notice that "michiru" and "tarou" reference the same sub-table.
</span><span class="comment">-- The error message reports whichever path it found first.
</span>
<span class="comment">-- Now let't try again with irgnore mode...
</span><span class="keyword">for</span> key, value, tbl, path, is_duplicate <span class="keyword">in</span>
  Iter.dpairs(players, {
    include_path = <span class="keyword">true</span>, include_duplicates=<span class="keyword">true</span>, ignore_recursion = <span class="keyword">true</span>
    })
  <span class="keyword">do</span>
  <span class="global">print</span>(format_row(key, value, path, is_duplicate))
  <span class="keyword">end</span>

&gt; <span class="comment">--[[This produces output identical to Example 2.]]</span>

</pre></li>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_filter_pairs_Functions"></a>lua.Iter.filter_pairs Functions</h2>

    <dl class="function">
    <dt>
    <a name = "filter_pairs"></a>
    <strong>filter_pairs(tbl, f)</strong>
    </dt>
    <dd>
    Returns only <a href="../modules/Types.html#KeyValuePair">(key → value)</a> pairs for which f(value,key,tbl) returns true.
 Other values in the table are simply skipped during iteration.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tbl</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a></span>
         The table to be iterated.
        </li>
        <li><span class="parameter">f</span>
            <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         The filter function f(value,key,table).
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="comment">-- For example if you've got stored LuaEntity references
</span>script.on_event(defines.events.on_built_entity,<span class="keyword">function</span>(event)
   <span class="keyword">if</span> event.entity.name == <span class="string">'MyEntity'</span> <span class="keyword">then</span>
     global.MyEntityData[event.entity.unit_number] = {entity=event.entity}
     <span class="keyword">end</span>
   <span class="keyword">end</span>)

<span class="comment">-- And want to remove the invalid ones. (Ignores key+tbl arguments)
</span><span class="keyword">local</span> filter = <span class="keyword">function</span>(data,_,_) <span class="keyword">return</span> <span class="keyword">not</span> data.entity.valid <span class="keyword">end</span>

<span class="keyword">for</span> unit_number,_ <span class="keyword">in</span> <span class="global">pairs</span>(global.MyEntityData,filter) <span class="keyword">do</span>
   global.MyEntityData[unit_number] = <span class="keyword">nil</span>
   <span class="keyword">end</span>
</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_ntuples_Functions"></a>lua.Iter.ntuples Functions</h2>

    <dl class="function">
    <dt>
    <a name = "ntuples"></a>
    <strong>ntuples(n[, tbl])</strong>
    </dt>
    <dd>
    Iterates n-nested sub-tables in a single for-loop. </p>

<p> Internally uses <a href="../lua-5.2/doc/manual.html#pdf-pairs">pairs()</a> to get each
 sub-table's __pairs metamethod or <a href="../lua-5.2/doc/manual.html#pdf-next">next()</a>.</p>

<p> If a sub-table does not contain enough sub-tables to reach
 depth n it will be ignored. Likewise any non-table values
 at depth &lt; n will also be ignored.</p>

<p> Returns every possible path of length n. This might
 lead to <strong>unexpected results</strong> when the input table is <strong>recursive</strong>
 or has multiple references to the same sub-table. See also <a href="../modules/Iter.html#dpairs">Iter.dpairs</a>.</p>

<p> See also <a href="../lua-5.2/doc/manual.html#2.4   ">Metatables and Metamethods</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">n</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         The length of the desired tuple. Values 1 and 2
 return pairs(tbl) instead.
        </li>
        <li><span class="parameter">tbl</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a></span>



         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a> or <a class="type" href="https://www.lua.org/pil/2.1.html">nil</a></span>
         There are three cases:</p>

<p> When tbl == nil returns <a href="../modules/Filter.html#SKIP">Filter.SKIP</a>. <br/>
 When n &lt;= 2 returns the three result values of calling pairs(tbl). <br/>
 When n >  2 returns a stateful iterator function and nothing else.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> players = {
  yurie = {
    items = {<span class="string">'iron-plate'</span>, <span class="string">'copper-plate'</span>},
    ammo  = {<span class="string">'piercing'</span>  , <span class="string">'uranium'</span>     },
    play_time = <span class="number">9001</span>, <span class="comment">-- ignored because it's not a table.
</span>    },
  tarou = {
    items = {<span class="string">'iron-gear'</span> , <span class="string">'copper-gear'</span> },
    ammo  = {}, <span class="comment">-- ignored because it's not deep enough.
</span>    play_time = <span class="number">42</span>,
    },
  akira = {
    items = {},
    ammo  = {<span class="string">'exploding'</span> , <span class="string">'magic'</span>       },
    play_time = <span class="number">7</span>,
    },
  }

<span class="keyword">for</span> nickname, <span class="global">type</span>, item_index, item_name <span class="keyword">in</span> Iter.ntuples(<span class="number">4</span>, players) <span class="keyword">do</span>
  <span class="global">print</span>(nickname, <span class="global">type</span>, item_index, item_name)
  <span class="keyword">end</span>

&gt; akira  ammo   <span class="number">1</span>  exploding
&gt; akira  ammo   <span class="number">2</span>  magic
&gt; yurie  ammo   <span class="number">1</span>  piercing
&gt; yurie  ammo   <span class="number">2</span>  uranium
&gt; yurie  items  <span class="number">1</span>  iron-plate
&gt; yurie  items  <span class="number">2</span>  copper-plate
&gt; tarou  items  <span class="number">1</span>  iron-gear
&gt; tarou  items  <span class="number">2</span>  copper-gear
</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_permutations_Functions"></a>lua.Iter.permutations Functions</h2>

    <dl class="function">
    <dt>
    <a name = "permutations"></a>
    <strong>permutations([arr[, i=1[, j=#arr]]])</strong>
    </dt>
    <dd>
    Iterates through all permutations that contain each value exactly once.
 A permutation is a list in which only the order of elements changes.</p>

<p> <strong>Time complexity:</strong> Factorial of size of arr → #arr!</p>

<p> <strong>See also:</strong> <a href="../modules/Iter.html#combinations">Iter.combinations</a>, <a href="../modules/Iter.html#subsets">Iter.subsets</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">arr</span>
            <span class="types"><a class="type" href="../modules/Types.html#DenseArray">DenseArray</a> or <a class="type" href="../modules/Types.html#SparseArray">SparseArray</a></span>
         If not given will instead use a
 <a href="../modules/Table.html#range">Table.range</a>(i,j).
         (<em>optional</em>)
        </li>
        <li><span class="parameter">i</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         The index of the first value that shall be part of the permutation.
         (<em>default</em> 1)
        </li>
        <li><span class="parameter">j</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         The index of the last value that shall be part of the permutation.
         (<em>default</em> #arr)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         A stateful iterator that returns an array for each
 permutation.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> arr <span class="keyword">in</span> Iter.permutations({<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>},<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">do</span> <span class="global">print</span>(Hydra.line(arr)) <span class="keyword">end</span>
&gt; {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}
&gt; {<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>}
&gt; {<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>}
&gt; {<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>}
&gt; {<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>}
&gt; {<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>}
</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_sriapi_Functions"></a>lua.Iter.sriapi Functions</h2>

    <dl class="function">
    <dt>
    <a name = "sriapi"></a>
    <strong>sriapi(arr)</strong>
    </dt>
    <dd>
    Inverse <a href="../lua-5.2/doc/manual.html#pdf-ipairs">ipairs()</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">arr</span>
            <span class="types"><a class="type" href="../modules/Types.html#DenseArray">DenseArray</a></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         f() A <strong>stateful</strong> iterator. When the iterator is called f()
 it returns (value, index) of the next entry in the array. Note:
 this means that <strong>the order of the return values is also inversed</strong>
 compared to normal ipairs().</p>

<p> The <code>__ipairs</code> methamethod of arr is <strong>ignored</strong> by this iterator.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">for</span> v,i <span class="keyword">in</span> sriapi({<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>}) <span class="keyword">do</span> <span class="global">print</span>((<span class="string">'i=%s, v=%s'</span>):format(i,v)) <span class="keyword">end</span>
&gt; i=<span class="number">5</span>, v=e
&gt; i=<span class="number">4</span>, v=d
&gt; i=<span class="number">3</span>, v=c
&gt; i=<span class="number">2</span>, v=b
&gt; i=<span class="number">1</span>, v=a
</pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_subsets_Functions"></a>lua.Iter.subsets Functions</h2>

    <dl class="function">
    <dt>
    <a name = "subsets"></a>
    <strong>subsets(size, arr)</strong>
    </dt>
    <dd>
    Produces all possible unique subsets of size n from a given superset arr.
 This means that it is guaranteed that for each possible combination of
 unique elements exactly one permutation will occur.</p>

<p> <strong>Time complexity:</strong> It depends *cough*.</p>

<p> <strong>Note:</strong> Despite the name sub-"set" all in- and outputs use array format for
 better performance.</p>

<p> <strong>See also:</strong> <a href="../modules/Iter.html#combinations">Iter.combinations</a>, <a href="../modules/Iter.html#permutations">Iter.permutations</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">size</span>
            <span class="types"><a class="type" href="../modules/Types.html#NaturalNumber">NaturalNumber</a></span>
         The exact size of each subset.
        </li>
        <li><span class="parameter">arr</span>
            <span class="types"><a class="type" href="../modules/Types.html#array">array</a></span>
         An array representing all elements of the source set.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/pil/2.6.html">function</a></span>
         A stateful iterator that returns an array for each
 subset.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <li><pre class="example"><span class="comment">-- A set with n elements only has one subset of length n.
</span><span class="keyword">for</span> s <span class="keyword">in</span> Iter.subsets(<span class="number">3</span>,{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>}) <span class="keyword">do</span> <span class="global">print</span>(Hydra.line(s)) <span class="keyword">end</span>
&gt; {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}
</pre></li>
        <li><pre class="example"><span class="keyword">for</span> s <span class="keyword">in</span> Iter.subsets(<span class="number">3</span>,{<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>}) <span class="keyword">do</span> <span class="global">print</span>(Hydra.line(s)) <span class="keyword">end</span>
&gt; {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}
&gt; {<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>}
&gt; {<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>}
&gt; {<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>}
&gt; {<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>}
&gt; {<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>}
&gt; {<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>}
&gt; {<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>}
&gt; {<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>}
&gt; {<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}
</pre></li>
    </ul>

</dd>
</dl>
    <h2 class="section-header "><a name="lua_Iter_sync_tuples_Functions"></a>lua.Iter.sync_tuples Functions</h2>

    <dl class="function">
    <dt>
    <a name = "sync_tuples"></a>
    <strong>sync_tuples(parent, ...)</strong>
    </dt>
    <dd>
    Iterates multiple tables in paralell. </p>

<p> <strong>Note:</strong> Standard <a href="../lua-5.2/doc/manual.html#pdf-next">next</a> rules apply regarding in-loop manipulation
 of the <strong>parent</strong> table.</p>

<p> <strong>Note:</strong> If the parents has a __pairs metamethod its resulting
 keys are used for all child tables.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">parent</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a></span>
         This determines which keys are iterated.
        </li>
        <li><span class="parameter">...</span>
            <span class="types"><a class="type" href="../lua-5.2/doc/manual.html#pdf-table">table</a> or <a class="type" href="https://www.lua.org/pil/2.1.html">nil</a></span>
         Additional tables to be iterated.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        k,v1,v2,v3,... Each iteration return the key and the value for each
 table in the order the tables were given.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="comment">-- Keys not in the parent table won't be iterated.
</span><span class="keyword">local</span> par = {<span class="keyword">nil</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="keyword">false</span>, [<span class="string">'x'</span>] = <span class="string">'f'</span>}
<span class="comment">-- Other tables nil keys will just return nil.
</span><span class="keyword">local</span> t1  = {<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="keyword">nil</span>, <span class="string">'E'</span>, [<span class="string">'x'</span>] = <span class="string">'F'</span>}
<span class="keyword">local</span> t2  = {<span class="keyword">nil</span>, <span class="keyword">nil</span>,  <span class="number">3</span> ,  <span class="number">4</span> ,  <span class="number">5</span> , [<span class="string">'x'</span>] =  <span class="number">6</span> }
<span class="comment">-- Empty arguments are assumed to be empty tables.
</span><span class="keyword">local</span> t3  =  <span class="keyword">nil</span>

<span class="keyword">for</span> k,vp,v1,v2,v3 <span class="keyword">in</span> Iter.sync_tuples(par,t1,t2,t3) <span class="keyword">do</span>
  <span class="global">print</span>(k,<span class="string">':'</span>,vp,v1,v2,v3)
  <span class="keyword">end</span>

&gt; <span class="number">2</span> : b     B   <span class="keyword">nil</span> <span class="keyword">nil</span>
&gt; <span class="number">3</span> : c     C   <span class="number">3</span>   <span class="keyword">nil</span>
&gt; <span class="number">4</span> : d     <span class="keyword">nil</span> <span class="number">4</span>   <span class="keyword">nil</span>
&gt; <span class="number">5</span> : <span class="keyword">false</span> E   <span class="number">5</span>   <span class="keyword">nil</span>
&gt; x : f     F   <span class="number">6</span>   <span class="keyword">nil</span>

</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2021-06-04 21:19:15 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
