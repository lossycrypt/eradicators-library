<!DOCTYPE html><html lang="en"><head ><title >LuaSurface</title><meta charset="UTF-8"/><link rel="stylesheet" type="text/css" href="lua-doc.css"/><script rel="stylesheet" type="text/javascript" src="lua-doc.js"></script></head><body ><div class="navigation-bar"><span class="navigation"><a href="index.html">Factorio</a> &raquo; <a href="Classes.html">Classes</a> &raquo; LuaSurface</span><span class="version">Factorio 1.1.39</span></div><h1 >LuaSurface</h1><div class="brief-description"><p > A &quot;domain&quot; of the world. Surfaces can only be created and deleted through the API. Surfaces
 are uniquely identified by their name. Every game contains at least the surface &quot;nauvis&quot;.
</p></div><div class="brief-listing"><div class="brief-listing" id="LuaSurface.brief">class <span class="type-name">LuaSurface</span> - <a class="sort" href="javascript:void(0)" onclick="sort('LuaSurface.brief');">sort</a><table class="brief-members"><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_pollution">get_pollution</a>(position) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span></span></td><td class="description"> Get the pollution for a given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.can_place_entity">can_place_entity</a>{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, build_check_type&nbsp;=&nbsp;&hellip;, forced&nbsp;=&nbsp;&hellip;, inner_name&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></td><td class="description"> Check for collisions with terrain or other entities.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.can_fast_replace">can_fast_replace</a>{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></td><td class="description"> If there exists an entity at the given location that can be fast-replaced with the given entity parameters.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_entity">find_entity</a>(entity, position) &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></td><td class="description"> Find a specific entity at a specific position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_entities">find_entities</a>(area) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></td><td class="description"> Find entities in a given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_entities_filtered">find_entities_filtered</a>{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, type&nbsp;=&nbsp;&hellip;, ghost_name&nbsp;=&nbsp;&hellip;, ghost_type&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, to_be_deconstructed&nbsp;=&nbsp;&hellip;, to_be_upgraded&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></td><td class="description"> Find entities of given type or name in a given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_tiles_filtered">find_tiles_filtered</a>{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, has_hidden_tile&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaTile.html">LuaTile</a></span>]</span></span></span></td><td class="description"> Find tiles of a given name in a given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.count_entities_filtered">count_entities_filtered</a>{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, type&nbsp;=&nbsp;&hellip;, ghost_name&nbsp;=&nbsp;&hellip;, ghost_type&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, to_be_deconstructed&nbsp;=&nbsp;&hellip;, to_be_upgraded&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></td><td class="description"> Count entities of given type or name in a given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.count_tiles_filtered">count_tiles_filtered</a>{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, has_hidden_tile&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></td><td class="description"> Count tiles of a given name in a given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_non_colliding_position">find_non_colliding_position</a>(name, center, radius, precision, force_to_tile_center) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#Position">Position</a></span></span></span></td><td class="description"> Find a non-colliding position within a given radius.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_non_colliding_position_in_box">find_non_colliding_position_in_box</a>(name, search_space, precision, force_to_tile_center) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#Position">Position</a></span></span></span></td><td class="description"> Find a non-colliding position within a given rectangle.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.spill_item_stack">spill_item_stack</a>(position, items, enable_looted, force, allow_belts) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></td><td class="description"> Spill items on the ground centered at a given location.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_enemy_units">find_enemy_units</a>(center, radius, force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></td><td class="description"> Find enemy units (entities with type &quot;unit&quot;) of a given force within an area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_units">find_units</a>{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, condition&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></td><td class="description"> Find units (entities with type &quot;unit&quot;) of a given force and force condition within a given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_nearest_enemy">find_nearest_enemy</a>{position&nbsp;=&nbsp;&hellip;, max_distance&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></td><td class="description"> Find the enemy entity-with-force (<a href="https://wiki.factorio.com/Military_units_and_structures">military entity</a>) closest to the given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_nearest_enemy_entity_with_owner">find_nearest_enemy_entity_with_owner</a>{position&nbsp;=&nbsp;&hellip;, max_distance&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></td><td class="description"> Find the enemy entity-with-owner closest to the given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.set_multi_command">set_multi_command</a>{command&nbsp;=&nbsp;&hellip;, unit_count&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, unit_search_distance&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></td><td class="description"> Give a command to multiple units.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.create_entity">create_entity</a>{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, target&nbsp;=&nbsp;&hellip;, source&nbsp;=&nbsp;&hellip;, fast_replace&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, spill&nbsp;=&nbsp;&hellip;, raise_built&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;, spawn_decorations&nbsp;=&nbsp;&hellip;, move_stuck_players&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></td><td class="description"> Create an entity on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.create_trivial_smoke">create_trivial_smoke</a>{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.create_particle">create_particle</a>{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, movement&nbsp;=&nbsp;&hellip;, height&nbsp;=&nbsp;&hellip;, vertical_speed&nbsp;=&nbsp;&hellip;, frame_speed&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Creates a particle at the given location
 </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.create_unit_group">create_unit_group</a>{position&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaUnitGroup.html">LuaUnitGroup</a></span></span></span></td><td class="description"> Create a new unit group at a given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.build_enemy_base">build_enemy_base</a>(position, unit_count, force)</span></td><td class="description"> Send a group to build a new base.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_tile">get_tile</a>(x, y) &rarr; <span class="return-type"><span class="param-type"><a href="LuaTile.html">LuaTile</a></span></span></span></td><td class="description"> Get the tile at a given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.set_tiles">set_tiles</a>(tiles, correct_tiles, remove_colliding_entities, remove_colliding_decoratives, raise_event)</span></td><td class="description"> Set tiles at specified locations.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.pollute">pollute</a>(source, amount)</span></td><td class="description"> Spawn pollution at the given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_chunks">get_chunks</a>() &rarr; <span class="return-type"><span class="param-type"><a href="LuaChunkIterator.html">LuaChunkIterator</a></span></span></span></td><td class="description"> Get an iterator going over every chunk on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.is_chunk_generated">is_chunk_generated</a>(position) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></td><td class="description"> Is a given chunk generated?</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.request_to_generate_chunks">request_to_generate_chunks</a>(position, radius)</span></td><td class="description"> Request that the game&#x27;s map generator generate chunks at the given position
 for the given radius on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.force_generate_chunk_requests">force_generate_chunk_requests</a>()</span></td><td class="description"> Blocks and generates all chunks that have been requested using all available threads.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.set_chunk_generated_status">set_chunk_generated_status</a>(position, status)</span></td><td class="description"> Set generated status of a chunk.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_logistic_network_by_position">find_logistic_network_by_position</a>(position, force) &rarr; <span class="return-type"><span class="param-type"><a href="LuaLogisticNetwork.html">LuaLogisticNetwork</a></span></span></span></td><td class="description"> Find the logistic network that covers a given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_logistic_networks_by_construction_area">find_logistic_networks_by_construction_area</a>(position, force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaLogisticNetwork.html">LuaLogisticNetwork</a></span>]</span></span></span></td><td class="description"> Finds all of the logistics networks whose construction area intersects with the given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.deconstruct_area">deconstruct_area</a>{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Place a deconstruction request.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.cancel_deconstruct_area">cancel_deconstruct_area</a>{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Cancel a deconstruction order.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.upgrade_area">upgrade_area</a>{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Place an upgrade request.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.cancel_upgrade_area">cancel_upgrade_area</a>{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Cancel a upgrade order.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_hidden_tile">get_hidden_tile</a>(position) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span></span></td><td class="description">   The hidden tile name or <code >nil</code> if there isn&#x27;t one for the given position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.set_hidden_tile">set_hidden_tile</a>(position, tile)</span></td><td class="description"> Set the hidden tile for the specified position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_connected_tiles">get_connected_tiles</a>(position, tiles) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#Position">Position</a></span>]</span></span></span></td><td class="description"> Gets all tiles of the given types that are connected horizontally or vertically to the given tile position including the given tile position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.delete_chunk">delete_chunk</a>(position)</span></td><td class="description">  </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.regenerate_entity">regenerate_entity</a>(entities, chunks)</span></td><td class="description"> Regenerate autoplacement of some entities on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.regenerate_decorative">regenerate_decorative</a>(decoratives, chunks)</span></td><td class="description"> Regenerate autoplacement of some decoratives on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.print">print</a>(message, color)</span></td><td class="description"> Print text to the chat console of all players on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.destroy_decoratives">destroy_decoratives</a>{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Removes all decoratives from the given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.create_decoratives">create_decoratives</a>{check_collision&nbsp;=&nbsp;&hellip;, decoratives&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Adds the given decoratives to the surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.find_decoratives_filtered">find_decoratives_filtered</a>{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#DecorativeResult">DecorativeResult</a></span>]</span></span></span></td><td class="description"> Find decoratives of a given name in a given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_trains">get_trains</a>(force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaTrain.html">LuaTrain</a></span>]</span></span></span></td><td class="description">  </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.clear_pollution">clear_pollution</a>()</span></td><td class="description"> Clears all pollution on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.play_sound">play_sound</a>{path&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, volume_modifier&nbsp;=&nbsp;&hellip;, override_sound_type&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Play a sound for every player on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_resource_counts">get_resource_counts</a>() &rarr; <span class="return-type"><span class="param-type">dictionary[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span> &rarr; <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>]</span></span></span></td><td class="description"> Gets the resource amount of all resources on this surface
 </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_random_chunk">get_random_chunk</a>() &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span></span></span></td><td class="description"> Gets a random generated chunk position or 0,0 if no chunks have been generated on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.clone_area">clone_area</a>{source_area&nbsp;=&nbsp;&hellip;, destination_area&nbsp;=&nbsp;&hellip;, destination_surface&nbsp;=&nbsp;&hellip;, destination_force&nbsp;=&nbsp;&hellip;, clone_tiles&nbsp;=&nbsp;&hellip;, clone_entities&nbsp;=&nbsp;&hellip;, clone_decoratives&nbsp;=&nbsp;&hellip;, clear_destination_entities&nbsp;=&nbsp;&hellip;, clear_destination_decoratives&nbsp;=&nbsp;&hellip;, expand_map&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Clones the given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.clone_brush">clone_brush</a>{source_offset&nbsp;=&nbsp;&hellip;, destination_offset&nbsp;=&nbsp;&hellip;, source_positions&nbsp;=&nbsp;&hellip;, destination_surface&nbsp;=&nbsp;&hellip;, destination_force&nbsp;=&nbsp;&hellip;, clone_tiles&nbsp;=&nbsp;&hellip;, clone_entities&nbsp;=&nbsp;&hellip;, clone_decoratives&nbsp;=&nbsp;&hellip;, clear_destination_entities&nbsp;=&nbsp;&hellip;, clear_destination_decoratives&nbsp;=&nbsp;&hellip;, expand_map&nbsp;=&nbsp;&hellip;, manual_collision_mode&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Clones the given area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.clone_entities">clone_entities</a>{entities&nbsp;=&nbsp;&hellip;, destination_offset&nbsp;=&nbsp;&hellip;, destination_surface&nbsp;=&nbsp;&hellip;, destination_force&nbsp;=&nbsp;&hellip;, snap_to_grid&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;}</span></td><td class="description"> Clones the given entities.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.clear">clear</a>(ignore_characters)</span></td><td class="description"> Clears this surface deleting all entities and chunks on it.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.request_path">request_path</a>{bounding_box&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;, start&nbsp;=&nbsp;&hellip;, goal&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, pathfind_flags&nbsp;=&nbsp;&hellip;, can_open_gates&nbsp;=&nbsp;&hellip;, path_resolution_modifier&nbsp;=&nbsp;&hellip;, entity_to_ignore&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></td><td class="description"> Generates a path with the specified constraints (as an array of <a href="Concepts.html#PathfinderWaypoint"> PathfinderWaypoints</a>) using the
   unit pathfinding algorithm.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_script_areas">get_script_areas</a>(name) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#ScriptArea">ScriptArea</a></span>]</span></span></span></td><td class="description"> Gets the script areas that match the given name or if no name is given all areas are returned.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_script_area">get_script_area</a>(key) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#ScriptArea">ScriptArea</a></span></span></span></td><td class="description"> Gets the first script area by name or id.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.edit_script_area">edit_script_area</a>(id, area)</span></td><td class="description"> Sets the given script area to the new values.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.add_script_area">add_script_area</a>(area) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></td><td class="description"> Adds the given script area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.remove_script_area">remove_script_area</a>(id) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></td><td class="description"> Removes the given script area.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_script_positions">get_script_positions</a>(name) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#ScriptPosition">ScriptPosition</a></span>]</span></span></span></td><td class="description"> Gets the script positions that match the given name or if no name is given all positions are returned.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_script_position">get_script_position</a>(key) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#ScriptPosition">ScriptPosition</a></span></span></span></td><td class="description"> Gets the first script position by name or id.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.edit_script_position">edit_script_position</a>(id, area)</span></td><td class="description"> Sets the given script position to the new values.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.add_script_position">add_script_position</a>(area) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></td><td class="description"> Adds the given script position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.remove_script_position">remove_script_position</a>(id) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></td><td class="description"> Removes the given script position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_map_exchange_string">get_map_exchange_string</a>() &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span></span></td><td class="description"> Gets the map exchange string for the current map generation settings of this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_starting_area_radius">get_starting_area_radius</a>() &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span></span></td><td class="description"> Gets the starting area radius of this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_closest">get_closest</a>(position, entities) &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></td><td class="description"> Gets the closest entity in the list to this position.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_train_stops">get_train_stops</a>{name&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></td><td class="description"> Gets train stops matching the given filters.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_total_pollution">get_total_pollution</a>() &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span></span></td><td class="description"> Gets the total amount of pollution on the surface by iterating over all of the chunks containing pollution.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.entity_prototype_collides">entity_prototype_collides</a>(prototype, position, use_map_generation_bounding_box, direction)</span></td><td class="description">    </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.decorative_prototype_collides">decorative_prototype_collides</a>(prototype, position)</span></td><td class="description">  </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.calculate_tile_properties">calculate_tile_properties</a>(property_names, positions) &rarr; <span class="return-type"><span class="param-type">dictionary[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span> &rarr; <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#double">double</a></span>]</span>]</span></span></span></td><td class="description">   </td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.get_entities_with_force">get_entities_with_force</a>(position, force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></td><td class="description"> Returns all the entities with force on this chunk for the given force.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.build_checkerboard">build_checkerboard</a>(area)</span></td><td class="description"> Sets the given area to the checkerboard lab tiles.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.name">name</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description">  The name of this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.index">index</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span><span class="attribute-mode"> [R]</span></td><td class="description">  Unique ID associated with this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.map_gen_settings">map_gen_settings</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Concepts.html#MapGenSettings">MapGenSettings</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description">  The generation settings for this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.generate_with_lab_tiles">generate_with_lab_tiles</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> When set to true, new chunks will be generated with lab tiles, instead of using the surface&#x27;s map generation settings.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.always_day">always_day</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> When set to true, the sun will always shine.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.daytime">daytime</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description">  Current time of day, as a number in range [0, 1).</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.darkness">darkness</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></span><span class="attribute-mode"> [R]</span></td><td class="description">  Amount of darkness at the current time.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.wind_speed">wind_speed</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description">  Current wind speed.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.wind_orientation">wind_orientation</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Concepts.html#RealOrientation">RealOrientation</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description">  Current wind direction.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.wind_orientation_change">wind_orientation_change</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description">  Change in wind orientation per tick.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.peaceful_mode">peaceful_mode</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description">  Is peaceful mode enabled on this surface?</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.freeze_daytime">freeze_daytime</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> True if daytime is currently frozen.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.ticks_per_day">ticks_per_day</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> The number of ticks per day for this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.dusk">dusk</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> The daytime when dusk starts.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.dawn">dawn</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> The daytime when dawn starts.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.evening">evening</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> The daytime when evening starts.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.morning">morning</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> The daytime when morning starts.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.solar_power_multiplier">solar_power_multiplier</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> The multiplier of solar power on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.min_brightness">min_brightness</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> The minimal brightness during the night.</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.brightness_visual_weights">brightness_visual_weights</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Concepts.html#ColorModifier">ColorModifier</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> Defines how surface daytime brightness influences each color channel of the current color lookup table (LUT).</td></tr><tr ><td class="header"><span class="element-name"><a href="LuaSurface.html#LuaSurface.show_clouds">show_clouds</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [RW]</span></td><td class="description"> If clouds are shown on this surface.</td></tr><tr ><td class="header"><span class="element-name"><a href="Common.html#Common.valid">valid</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [R]</span></td><td class="description">
        Is this object valid?</td></tr><tr ><td class="header"><span class="element-name"><a href="Common.html#Common.object_name">object_name</a></span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span><span class="attribute-mode"> [R]</span></td><td class="description">
        The class name of this object.</td></tr><tr ><td class="header"><span class="element-name"><a href="Common.html#Common.help">help</a>() &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span></span></td><td class="description">
        All methods and properties that this object supports.</td></tr></table></div></div><div class="element" id="LuaSurface"><div class="element" id="LuaSurface.get_pollution"><div class="element-header"><span class="element-name">get_pollution(position) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span></span></div><div class="element-content"><p > Get the pollution for a given position.
 </p><p >
 </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> Pollution is stored per chunk, so this will return the same value for all positions in one chunk.</div></div><div class="example"><div class="example-header">Example</div>
   <div class="block-code-container"><code class="block">game.surfaces[1].get_pollution({1,2})</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.can_place_entity"><div class="element-header"><span class="element-name">can_place_entity{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, build_check_type&nbsp;=&nbsp;&hellip;, forced&nbsp;=&nbsp;&hellip;, inner_name&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></div><div class="element-content"><p > Check for collisions with terrain or other entities.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  Name of the entity prototype to check.</li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Where the entity would be placed.</li><li ><span class="param-name">direction</span> :: <span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span> <span class="opt"> (optional)</span>:  Direction of the placed entity.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  The force that would place the entity. If not specified, the enemy
     force is assumed.</li><li ><span class="param-name">build_check_type</span> :: <span class="param-type"><a href="defines.html#defines.build_check_type">defines.build_check_type</a></span> <span class="opt"> (optional)</span>:  Which type of check should be carried out.</li><li ><span class="param-name">forced</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If <code >true</code>, entities that can be marked for deconstruction are ignored. Only used
     if <code >build_check_type</code> is either <code >manual_ghost</code>, <code >script_ghost</code> or <code >blueprint_ghost</code>.</li><li ><span class="param-name">inner_name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span> <span class="opt"> (optional)</span>:  The prototype name of the entity contained in the ghost. Only used if <code >name</code>
     is <code >entity-ghost</code>.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.can_fast_replace"><div class="element-header"><span class="element-name">can_fast_replace{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></div><div class="element-content"><p > If there exists an entity at the given location that can be fast-replaced with the given entity parameters.
 </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  Name of the entity to check</li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Where the entity would be placed</li><li ><span class="param-name">direction</span> :: <span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span> <span class="opt"> (optional)</span>:  Direction the entity would be placed</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  The force that would place the entity.
     If not specified, the enemy force is assumed.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.find_entity"><div class="element-header"><span class="element-name">find_entity(entity, position) &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></div><div class="element-content"><p > Find a specific entity at a specific position.</p><p > </p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">entity</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  Entity to look for</div><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Coordinates to look at</div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> Will be <code >nil</code> if no such entity is found.</div></div><div class="example"><div class="example-header">Example</div>
   <div class="block-code-container"><code class="block">game.player.selected.surface.find_entity('filter-inserter',&nbsp;{0,0})</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.find_entities"><div class="element-header"><span class="element-name">find_entities(area) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></div><div class="element-content"><p > Find entities in a given area.</p><p > If no area is given all entities on the surface are returned.</p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span></div></div></div><div class="example"><div class="example-header">Example</div>
   Will evaluate to a list of all entities within given area.
   <div class="block-code-container"><code class="block">game.surfaces["nauvis"].find_entities({{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}})</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.find_entities_filtered"><div class="element-header"><span class="element-name">find_entities_filtered{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, type&nbsp;=&nbsp;&hellip;, ghost_name&nbsp;=&nbsp;&hellip;, ghost_type&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, to_be_deconstructed&nbsp;=&nbsp;&hellip;, to_be_upgraded&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></div><div class="element-content"><p > Find entities of given type or name in a given area.</p><p > If no filters (<code >name</code>, <code >type</code>, <code >force</code>, etc.) are given, returns all entities in the search area.
 If multiple filters are specified, returns only entities matching all given filters.</p><p > If no area or position are given, then the entire surface is searched.
 If position is given, returns entities colliding with that position (i.e the given position is within the entity&#x27;s collision box).
 If position and radius are given, returns entities in that radius of the position.
 If area is specified, returns entities colliding with that area.</p><p > </p><p >
 </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span> <span class="opt"> (optional)</span>:  Has precedence over area field.</li><li ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span> <span class="opt"> (optional)</span>:  If given with position, will return all entities within the radius of the position.</li><li ><span class="param-name">name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">type</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">ghost_name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">ghost_type</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">direction</span> :: <span class="param-type"><span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span> or <span class="param-type">array[<span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">collision_mask</span> :: <span class="param-type"><span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span> or <span class="param-type">array[<span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">force</span> :: <span class="param-type"><span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> or <span class="param-type">array[<span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">to_be_deconstructed</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">to_be_upgraded</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">limit</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">invert</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the filters should be inverted. These filters are: name, type, ghost_name, ghost_type, direction, collision_mask, force.</li></ul></div></div></div><div class="example"><div class="example-header">Example</div>
   <div class="block-code-container"><code class="block">   game.surfaces[1].find_entities_filtered{area&nbsp;=&nbsp;{{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}},&nbsp;type&nbsp;=&nbsp;"resource"}&nbsp;--&nbsp;gets&nbsp;all&nbsp;resources&nbsp;in&nbsp;the&nbsp;rectangle<br/>
   game.surfaces[1].find_entities_filtered{area&nbsp;=&nbsp;{{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}},&nbsp;name&nbsp;=&nbsp;"iron-ore"}&nbsp;--&nbsp;gets&nbsp;all&nbsp;iron&nbsp;ores&nbsp;in&nbsp;the&nbsp;rectangle<br/>
   game.surfaces[1].find_entities_filtered{area&nbsp;=&nbsp;{{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}},&nbsp;name&nbsp;=&nbsp;{"iron-ore",&nbsp;"copper-ore"}}&nbsp;--&nbsp;gets&nbsp;all&nbsp;iron&nbsp;ore&nbsp;and&nbsp;copper&nbsp;ore&nbsp;in&nbsp;the&nbsp;rectangle<br/>
   game.surfaces[1].find_entities_filtered{area&nbsp;=&nbsp;{{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}},&nbsp;force&nbsp;=&nbsp;"player"}&nbsp;&nbsp;--&nbsp;gets&nbsp;player&nbsp;owned&nbsp;entities&nbsp;in&nbsp;the&nbsp;rectangle<br/>
   game.surfaces[1].find_entities_filtered{area&nbsp;=&nbsp;{{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}},&nbsp;limit&nbsp;=&nbsp;5}&nbsp;&nbsp;--&nbsp;gets&nbsp;the&nbsp;first&nbsp;5&nbsp;entities&nbsp;in&nbsp;the&nbsp;rectangle<br/>
   game.surfaces[1].find_entities_filtered{position&nbsp;=&nbsp;{0,&nbsp;0},&nbsp;radius&nbsp;=&nbsp;10}&nbsp;&nbsp;--&nbsp;gets&nbsp;all&nbsp;entities&nbsp;within&nbsp;10&nbsp;tiles&nbsp;of&nbsp;the&nbsp;position&nbsp;[0,0].</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.find_tiles_filtered"><div class="element-header"><span class="element-name">find_tiles_filtered{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, has_hidden_tile&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaTile.html">LuaTile</a></span>]</span></span></span></div><div class="element-content"><p > Find tiles of a given name in a given area.</p><p > If no filters are given returns all tiles in the search area.</p><p > If no area or position and radius is given, then the entire surface is searched.
 If position and radius are given, only tiles within the radius of the position are included.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span> <span class="opt"> (optional)</span>:  Ignored if not given with radius.</li><li ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span> <span class="opt"> (optional)</span>:  If given with position, will return all entities within the radius of the position.</li><li ><span class="param-name">name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">limit</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">has_hidden_tile</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">collision_mask</span> :: <span class="param-type"><span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span> or <span class="param-type">array[<span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span>]</span></span> <span class="opt"> (optional)</span></li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.count_entities_filtered"><div class="element-header"><span class="element-name">count_entities_filtered{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, type&nbsp;=&nbsp;&hellip;, ghost_name&nbsp;=&nbsp;&hellip;, ghost_type&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, to_be_deconstructed&nbsp;=&nbsp;&hellip;, to_be_upgraded&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></div><div class="element-content"><p > Count entities of given type or name in a given area. Works just like
 <a href="LuaSurface.html#LuaSurface.find_entities_filtered">LuaSurface::find_entities_filtered</a>, except this only returns the count. As it doesn&#x27;t
 construct all the wrapper objects, this is more efficient if one is only interested in the
 number of entities.</p><p > If no area or position are given, then the entire surface is searched.
 If position is given, returns entities colliding with that position (i.e the given position is within the entity&#x27;s collision box).
 If position and radius are given, returns entities in that radius of the position.
 If area is specified, returns entities colliding with that area.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span> <span class="opt"> (optional)</span>:  If given with position, will count all entities within the radius of the position.</li><li ><span class="param-name">name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">type</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">ghost_name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">ghost_type</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">direction</span> :: <span class="param-type"><span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span> or <span class="param-type">array[<span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">collision_mask</span> :: <span class="param-type"><span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span> or <span class="param-type">array[<span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">force</span> :: <span class="param-type"><span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> or <span class="param-type">array[<span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">to_be_deconstructed</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">to_be_upgraded</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">limit</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">invert</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the filters should be inverted. These filters are: name, type, ghost_name, ghost_type, direction, collision_mask, force.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.count_tiles_filtered"><div class="element-header"><span class="element-name">count_tiles_filtered{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, has_hidden_tile&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></div><div class="element-content"><p > Count tiles of a given name in a given area. Works just like
 <a href="LuaSurface.html#LuaSurface.find_tiles_filtered">LuaSurface::find_tiles_filtered</a>, except this only returns the count. As it doesn&#x27;t
 construct all the wrapper objects, this is more efficient if one is only interested in the
 number of tiles.</p><p > If no area or position and radius is given, then the entire surface is searched.
 If position and radius are given, only tiles within the radius of the position are included.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span> <span class="opt"> (optional)</span>:  Ignored if not given with radius.</li><li ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span> <span class="opt"> (optional)</span>:  If given with position, will return all entities within the radius of the position.</li><li ><span class="param-name">name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">limit</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">has_hidden_tile</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">collision_mask</span> :: <span class="param-type"><span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span> or <span class="param-type">array[<span class="param-type"><a href="Concepts.html#CollisionMaskLayer">CollisionMaskLayer</a></span>]</span></span> <span class="opt"> (optional)</span></li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.find_non_colliding_position"><div class="element-header"><span class="element-name">find_non_colliding_position(name, center, radius, precision, force_to_tile_center) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#Position">Position</a></span></span></span></div><div class="element-content"><p > Find a non-colliding position within a given radius.</p><p > </p><p > </p><p > </p><p > </p><p > </p><p >
 </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  Prototype name of the entity to find a position for. (The bounding
   box for the collision checking is taken from this prototype.)</div><div ><span class="param-name">center</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Center of the search area.</div><div ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span>:  Max distance from <code >center</code> to search in. A radius of <code >0</code> means an infinitely-large
   search area.</div><div ><span class="param-name">precision</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span>:  The step length from the given position as it searches, in tiles. Minimum value is <code >0.01</code>.</div><div ><span class="param-name">force_to_tile_center</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  Will only check tile centers. This can be useful when your intent is to place a building at the resulting position,
   as they must generally be placed at tile centers. Default false.</div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The non-colliding position. May be <code >nil</code> if no suitable position was found.</div></div><div class="notes"><div class="note"><strong >Note: </strong> Special care needs to be taken when using a radius of <code >0</code>. The game will not stop searching until it finds a suitable position, so it is important to make sure such a position exists. One particular case where it would not be able to find a solution is running it before any chunks have been generated.</div></div></div></div>
<div class="element" id="LuaSurface.find_non_colliding_position_in_box"><div class="element-header"><span class="element-name">find_non_colliding_position_in_box(name, search_space, precision, force_to_tile_center) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#Position">Position</a></span></span></span></div><div class="element-content"><p > Find a non-colliding position within a given rectangle.</p><p > </p><p > </p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  Prototype name of the entity to find a position for. (The bounding
   box for the collision checking is taken from this prototype.)</div><div ><span class="param-name">search_space</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  The rectangle to search inside.</div><div ><span class="param-name">precision</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span>:  The step length from the given position as it searches, in tiles. Minimum value is 0.01.</div><div ><span class="param-name">force_to_tile_center</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  Will only check tile centers. This can be useful when your intent is to place a building at the resulting position,
   as they must generally be placed at tile centers. Default false.</div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The non-colliding position. May be <code >nil</code> if no suitable position was found.</div></div></div></div>
<div class="element" id="LuaSurface.spill_item_stack"><div class="element-header"><span class="element-name">spill_item_stack(position, items, enable_looted, force, allow_belts) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></div><div class="element-content"><p > Spill items on the ground centered at a given location.</p><p > </p><p > </p><p > </p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Center of the spillage</div><div ><span class="param-name">items</span> :: <span class="param-type"><a href="Concepts.html#ItemStackIdentification">ItemStackIdentification</a></span>:  Items to spill</div><div ><span class="param-name">enable_looted</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  When true, each created item will be flagged with the <a href="LuaEntity.html#LuaEntity.to_be_looted">LuaEntity::to_be_looted</a> flag.</div><div ><span class="param-name">force</span> :: <span class="param-type"><span class="param-type"><a href="LuaForce.html">LuaForce</a></span> or <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span> <span class="opt"> (optional)</span>:  When provided (and not <code >nil</code>) the items will be marked for deconstruction by this force.</div><div ><span class="param-name">allow_belts</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  Whether items can be spilled onto belts. Defaults to <code >true</code>.</div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The created item-on-ground entities.</div></div></div></div>
<div class="element" id="LuaSurface.find_enemy_units"><div class="element-header"><span class="element-name">find_enemy_units(center, radius, force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></div><div class="element-content"><p > Find enemy units (entities with type &quot;unit&quot;) of a given force within an area.</p><p > </p><p > </p><p > </p><p >
 </p><p >
 </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">center</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Center of the search area</div><div ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span>:  Radius of the circular search area</div><div ><span class="param-name">force</span> :: <span class="param-type"><span class="param-type"><a href="LuaForce.html">LuaForce</a></span> or <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span> <span class="opt"> (optional)</span>:  Force to find enemies of. If not given,
   uses the player force.</div></div></div><div class="notes"><div class="note"><strong >Note: </strong> This is more efficient than <a href="LuaSurface.html#LuaSurface.find_entities">LuaSurface::find_entities</a>.</div></div><div class="example"><div class="example-header">Example</div>
   Find all units who would be interested to attack the player, within 100-tile area.
   <div class="block-code-container"><code class="block">local&nbsp;enemies&nbsp;=&nbsp;game.player.surface.find_enemy_units(game.player.position,&nbsp;100)</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.find_units"><div class="element-header"><span class="element-name">find_units{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, condition&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></div><div class="element-content"><p > Find units (entities with type &quot;unit&quot;) of a given force and force condition within a given area.</p><p > </p><p > </p><p >
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  Box to find units within.</li><li ><span class="param-name">force</span> :: <span class="param-type"><span class="param-type"><a href="LuaForce.html">LuaForce</a></span> or <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span>:  Force performing the search.</li><li ><span class="param-name">condition</span> :: <span class="param-type"><a href="Concepts.html#ForceCondition">ForceCondition</a></span>:  Only forces which meet the condition will be included in the search.</li></ul></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> This is more efficient than <a href="LuaSurface.html#LuaSurface.find_entities">LuaSurface::find_entities</a>.</div></div><div class="example"><div class="example-header">Example</div>
   Find friendly units to &quot;player&quot; force
   <div class="block-code-container"><code class="block">local&nbsp;friendly_units&nbsp;=&nbsp;game.player.surface.find_units({area&nbsp;=&nbsp;{{-10,&nbsp;-10},{10,&nbsp;10}},&nbsp;force&nbsp;=&nbsp;"player",&nbsp;condition&nbsp;=&nbsp;"friend")</code></div></div><div class="example"><div class="example-header">Example</div>   Find units of &quot;player&quot; force
   <div class="block-code-container"><code class="block">local&nbsp;units&nbsp;=&nbsp;game.player.surface.find_units({area&nbsp;=&nbsp;{{-10,&nbsp;-10},{10,&nbsp;10}},&nbsp;force&nbsp;=&nbsp;"player",&nbsp;condition&nbsp;=&nbsp;"same"})</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.find_nearest_enemy"><div class="element-header"><span class="element-name">find_nearest_enemy{position&nbsp;=&nbsp;&hellip;, max_distance&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></div><div class="element-content"><p > Find the enemy entity-with-force (<a href="https://wiki.factorio.com/Military_units_and_structures">military entity</a>) closest to the given position.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Center of the search area.</li><li ><span class="param-name">max_distance</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span>:  Radius of the circular search area.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  The force the result will be an enemy of.
     Uses the player force if not specified.</li></ul></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The nearest enemy entity-with-force or <code >nil</code> if no enemy could be found within the
   given area.</div></div></div></div>
<div class="element" id="LuaSurface.find_nearest_enemy_entity_with_owner"><div class="element-header"><span class="element-name">find_nearest_enemy_entity_with_owner{position&nbsp;=&nbsp;&hellip;, max_distance&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></div><div class="element-content"><p > Find the enemy entity-with-owner closest to the given position.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Center of the search area.</li><li ><span class="param-name">max_distance</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span>:  Radius of the circular search area.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  The force the result will be an enemy of.
     Uses the player force if not specified.</li></ul></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The nearest enemy entity-with-owner or <code >nil</code> if no enemy could be found within the
   given area.</div></div></div></div>
<div class="element" id="LuaSurface.set_multi_command"><div class="element-header"><span class="element-name">set_multi_command{command&nbsp;=&nbsp;&hellip;, unit_count&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, unit_search_distance&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></div><div class="element-content"><p > Give a command to multiple units. This will automatically select suitable units for the
 task.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">command</span> :: <span class="param-type"><a href="Concepts.html#Command">Command</a></span></li><li ><span class="param-name">unit_count</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>:  Number of units to give the command to.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  Force of the units this command is to be given to.
     If not specified, uses the enemy force.</li><li ><span class="param-name">unit_search_distance</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span>:  Radius to search for units. The search area is centered on
     the destination of the command.</li></ul></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> Number of units actually sent. May be less than <code >count</code> if not enough units were
   available.</div></div></div></div>
<div class="element" id="LuaSurface.create_entity"><div class="element-header"><span class="element-name">create_entity{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, direction&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, target&nbsp;=&nbsp;&hellip;, source&nbsp;=&nbsp;&hellip;, fast_replace&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, spill&nbsp;=&nbsp;&hellip;, raise_built&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;, spawn_decorations&nbsp;=&nbsp;&hellip;, move_stuck_players&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></div><div class="element-content"><p > Create an entity on this surface.</p><p > </p><p >
 </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  The entity prototype name to create.</li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Where to create the entity.</li><li ><span class="param-name">direction</span> :: <span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span> <span class="opt"> (optional)</span>:  Desired orientation of the entity after creation.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  Force of the entity, default is enemy.</li><li ><span class="param-name">target</span> :: <span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span> <span class="opt"> (optional)</span>:  Entity with health for the new entity to target.</li><li ><span class="param-name">source</span> :: <span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span> <span class="opt"> (optional)</span>:  Source entity. Used for beams and highlight-boxes.</li><li ><span class="param-name">fast_replace</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true, building will attempt to simulate fast-replace building.</li><li ><span class="param-name">player</span> :: <span class="param-type"><a href="Concepts.html#PlayerIdentification">PlayerIdentification</a></span> <span class="opt"> (optional)</span>:  If given set the last_user to this player. If fast_replace
     is true simulate fast replace using this player.</li><li ><span class="param-name">spill</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If false while fast_replace is true and player is nil any items from
     fast-replacing will be deleted instead of dropped on the ground.</li><li ><span class="param-name">raise_built</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true; <a href="defines.html#defines.events.script_raised_built">defines.events.script_raised_built</a> will be fired
     on successful entity creation.</li><li ><span class="param-name">create_build_effect_smoke</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If false, the building effect smoke will not be shown
     around the new entity.</li><li ><span class="param-name">spawn_decorations</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true, entity types that have spawn_decorations property
     will apply triggers defined in the property.</li><li ><span class="param-name">move_stuck_players</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true, any characters that are in the way of the entity
     are teleported out of the way.</li><li ><span class="param-name">item</span> :: <span class="param-type"><a href="LuaItemStack.html">LuaItemStack</a></span> <span class="opt"> (optional)</span>:  If provided, the entity will attempt to pull stored values from this
     item (for example; creating a spidertron from a previously named and mined spidertron)</li><li > Other attributes may be specified depending on the type of entity:<ul ><li ><code >assembling-machine</code><ul class="field-list"><li ><span class="param-name">recipe</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span> <span class="opt"> (optional)</span></li></ul></li><li ><code >beam</code><ul class="field-list"><li ><span class="param-name">target_position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span> <span class="opt"> (optional)</span>:  Absolute target position that can be used instead of target
         entity (entity has precedence if both entity and position are defined).</li><li ><span class="param-name">source_position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span> <span class="opt"> (optional)</span>:  Absolute source position that can be used instead of source
         entity (entity has precedence if both entity and position are defined).</li><li ><span class="param-name">max_length</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span>:  If set, beam will be destroyed when distance between source and target
         is greater than this value.</li><li ><span class="param-name">duration</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span>:  If set, beam will be destroyed after this value of ticks.</li><li ><span class="param-name">source_offset</span> :: <span class="param-type"><a href="Concepts.html#Vector">Vector</a></span> <span class="opt"> (optional)</span>:  Source position will be offset by this value when rendering the beam.</li></ul></li><li ><code >container</code><ul class="field-list"><li ><span class="param-name">bar</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span>:  Inventory index where the red limiting bar should be set.</li></ul></li><li ><code >cliff</code><ul class="field-list"><li ><span class="param-name">cliff_orientation</span> :: <span class="param-type"><a href="Concepts.html#CliffOrientation">CliffOrientation</a></span> <span class="opt"> (optional)</span>:  If not specified, <code >direction</code> will be used instead.</li></ul></li><li ><code >flying-text</code><ul class="field-list"><li ><span class="param-name">text</span> :: <span class="param-type"><a href="Concepts.html#LocalisedString">LocalisedString</a></span>:  The string to show.</li><li ><span class="param-name">color</span> :: <span class="param-type"><a href="Concepts.html#Color">Color</a></span> <span class="opt"> (optional)</span>:  Color of the displayed text.</li><li ><span class="param-name">render_player_index</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li></ul></li><li ><code >entity-ghost</code><ul class="field-list"><li ><span class="param-name">inner_name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  The prototype name of the entity contained in the ghost.</li><li ><span class="param-name">expires</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If <code >false</code> the ghost entity will not expire. Default is <code >false</code>.</li></ul></li><li ><code >fire</code><ul class="field-list"><li ><span class="param-name">initial_ground_flame_count</span> :: <span class="param-type"><a href="Builtin-Types.html#uint8">uint8</a></span> <span class="opt"> (optional)</span>:  With how many small flames should the fire on ground
         be created. Defaults to the initial flame count of the prototype.</li></ul></li><li ><code >inserter</code><ul class="field-list"><li ><span class="param-name">conditions</span> :: <span class="param-type"><a href="Concepts.html#InserterCircuitConditions">InserterCircuitConditions</a></span></li><li ><span class="param-name">filters</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#InventoryFilter">InventoryFilter</a></span>]</span></li></ul></li><li ><code >item-entity</code><ul class="field-list"><li ><span class="param-name">stack</span> :: <span class="param-type"><a href="Concepts.html#SimpleItemStack">SimpleItemStack</a></span>:  The stack of items to create.</li></ul></li><li ><code >item-request-proxy</code><ul class="field-list"><li ><span class="param-name">target</span> :: <span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>:  The target items are to be delivered to.</li><li ><span class="param-name">modules</span> :: <span class="param-type">dictionary[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span> &rarr; <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>]</span>:  The stacks of items to be delivered to target entity from
         logistic network.</li></ul></li><li ><code >rolling-stock</code><ul class="field-list"><li ><span class="param-name">orientation</span> :: <span class="param-type"><a href="Concepts.html#RealOrientation">RealOrientation</a></span> <span class="opt"> (optional)</span>:  The orientation of this rolling stock.</li><li ><span class="param-name">color</span> :: <span class="param-type"><a href="Concepts.html#Color">Color</a></span> <span class="opt"> (optional)</span>:  The color of this rolling stock, if it supports colors.</li></ul></li><li ><code >locomotive</code><ul class="field-list"><li ><span class="param-name">snap_to_train_stop</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  Whether the locomotive should snap to an adjacent train
         stop. Defaults to true.</li></ul></li><li ><code >logistic-container</code><ul class="field-list"><li ><span class="param-name">request_filters</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#InventoryFilter">InventoryFilter</a></span>]</span> <span class="opt"> (optional)</span></li></ul></li><li ><code >particle</code><ul class="field-list"><li ><span class="param-name">movement</span> :: <span class="param-type"><a href="Concepts.html#Vector">Vector</a></span></li><li ><span class="param-name">height</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li><li ><span class="param-name">vertical_speed</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li><li ><span class="param-name">frame_speed</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li></ul></li><li ><code >artillery-flare</code><ul class="field-list"><li ><span class="param-name">movement</span> :: <span class="param-type"><a href="Concepts.html#Vector">Vector</a></span></li><li ><span class="param-name">height</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li><li ><span class="param-name">vertical_speed</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li><li ><span class="param-name">frame_speed</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li></ul></li><li ><code >projectile</code><ul class="field-list"><li ><span class="param-name">speed</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></li><li ><span class="param-name">max_range</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></li></ul></li><li ><code >resource</code><ul class="field-list"><li ><span class="param-name">amount</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></li><li ><span class="param-name">enable_tree_removal</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If colliding trees are removed normally for this resource
         entity based off the prototype tree removal values. Default is true.</li><li ><span class="param-name">enable_cliff_removal</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If colliding cliffs are removed. Default is true.</li><li ><span class="param-name">snap_to_tile_center</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true, the resource entity will be placed to center of a
         tile as map generator would place it, otherwise standard non-resource grid alignment rules will apply.
         Default is true.</li></ul></li><li ><code >underground-belt</code><ul class="field-list"><li ><span class="param-name">type</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span> <span class="opt"> (optional)</span>:  <code >"output"</code> or <code >"input"</code>; default is <code >"input"</code>.</li></ul></li><li ><code >programmable-speaker</code><ul class="field-list"><li ><span class="param-name">parameters</span> :: <span class="param-type"><a href="Concepts.html#ProgrammableSpeakerParameters">ProgrammableSpeakerParameters</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">alert_parameters</span> :: <span class="param-type"><a href="Concepts.html#ProgrammableSpeakerAlertParameters">ProgrammableSpeakerAlertParameters</a></span> <span class="opt"> (optional)</span></li></ul></li><li ><code >character-corpse</code><ul class="field-list"><li ><span class="param-name">inventory_size</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">player_index</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li></ul></li><li ><code >highlight-box</code><ul class="field-list"><li ><span class="param-name">bounding_box</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span>:  The bounding box defining the highlight box using absolute map
         coordinates. If specified, the <code >position</code> parameter is ignored, but needs to be present anyways. If not
         specified, the game falls back to the <code >source</code> parameter first, then the <code >target</code> parameter second. One of
         these three parameters need to be specified.</li><li ><span class="param-name">box_type</span> :: <span class="param-type"><a href="Concepts.html#CursorBoxRenderType">CursorBoxRenderType</a></span> <span class="opt"> (optional)</span>:  Specifies the graphical appearance (color) of the highlight
         box. Defaults to <code >"electricity"</code>.</li><li ><span class="param-name">render_player_index</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span>:  The player to render the highlight box for. If not provided, it
         will be rendered for all players.</li><li ><span class="param-name">blink_interval</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span>:  The blink interval for this highlight box. Makes it be shown
         every <code >blink_interval</code> ticks. Defaults to <code >0</code> (constantly shown).</li><li ><span class="param-name">time_to_live</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span>:  The amount of time in ticks that the highlight box will exist for.
         Defaults to existing forever.</li></ul></li><li ><code >speech-bubble</code><ul class="field-list"><li ><span class="param-name">text</span> :: <span class="param-type"><a href="Concepts.html#LocalisedString">LocalisedString</a></span></li><li ><span class="param-name">lifetime</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li></ul></li><li ><code >simple-entity-with-owner</code><ul class="field-list"><li ><span class="param-name">render_player_index</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li></ul></li><li ><code >simple-entity-with-force</code><ul class="field-list"><li ><span class="param-name">render_player_index</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li></ul></li></ul></li></ul></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The created entity or <code >nil</code> if the creation failed.</div></div><div class="example"><div class="example-header">Example</div>
   <div class="block-code-container"><code class="block">asm&nbsp;=&nbsp;game.surfaces[1].create_entity{name&nbsp;=&nbsp;"assembling-machine-1",&nbsp;position&nbsp;=&nbsp;{15,&nbsp;3},&nbsp;force&nbsp;=&nbsp;game.forces.player,&nbsp;recipe&nbsp;=&nbsp;"iron-stick"}</code></div></div><div class="example"><div class="example-header">Example</div>   Creates a filter inserter with circuit conditions and a filter
   <div class="block-code-container"><code class="block">   game.surfaces[1].create_entity{<br/>
   &nbsp;&nbsp;name&nbsp;=&nbsp;"filter-inserter",&nbsp;position&nbsp;=&nbsp;{20,&nbsp;15},&nbsp;force&nbsp;=&nbsp;game.player.force,<br/>
   &nbsp;&nbsp;conditions&nbsp;=&nbsp;{red&nbsp;=&nbsp;{name&nbsp;=&nbsp;"wood",&nbsp;count&nbsp;=&nbsp;3,&nbsp;operator&nbsp;=&nbsp;">"},<br/>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;green&nbsp;=&nbsp;{name&nbsp;=&nbsp;"iron-ore",&nbsp;count&nbsp;=&nbsp;1,&nbsp;operator&nbsp;=&nbsp;"<"},<br/>
   &nbsp;&nbsp;logistics&nbsp;=&nbsp;{name&nbsp;=&nbsp;"wood",&nbsp;count&nbsp;=&nbsp;3,&nbsp;operator&nbsp;=&nbsp;"="}},<br/>
   &nbsp;&nbsp;filters&nbsp;=&nbsp;{{index&nbsp;=&nbsp;1,&nbsp;name&nbsp;=&nbsp;"iron-ore"}}<br/>
   }</code></div></div><div class="example"><div class="example-header">Example</div>   Creates a requester chest already set to request 128 iron plates.
   <div class="block-code-container"><code class="block">   game.surfaces[1].create_entity{<br/>
   &nbsp;&nbsp;name&nbsp;=&nbsp;"logistic-chest-requester",&nbsp;position&nbsp;=&nbsp;{game.player.position.x+3,&nbsp;game.player.position.y},<br/>
   &nbsp;&nbsp;force&nbsp;=&nbsp;game.player.force,&nbsp;request_filters&nbsp;=&nbsp;{{index&nbsp;=&nbsp;1,&nbsp;name&nbsp;=&nbsp;"iron-plate",&nbsp;count&nbsp;=&nbsp;128}}<br/>
   }</code></div></div><div class="example"><div class="example-header">Example</div>   <div class="block-code-container"><code class="block">   game.surfaces[1].create_entity{name&nbsp;=&nbsp;"big-biter",&nbsp;position&nbsp;=&nbsp;{15,&nbsp;3},&nbsp;force&nbsp;=&nbsp;game.forces.player}&nbsp;--&nbsp;Friendly&nbsp;biter<br/>
   game.surfaces[1].create_entity{name&nbsp;=&nbsp;"medium-biter",&nbsp;position&nbsp;=&nbsp;{15,&nbsp;3},&nbsp;force&nbsp;=&nbsp;game.forces.enemy}&nbsp;--&nbsp;Enemy&nbsp;biter</code></div></div><div class="example"><div class="example-header">Example</div>   Creates a basic inserter at the player&#x27;s location facing north
   <div class="block-code-container"><code class="block">   game.surfaces[1].create_entity{name&nbsp;=&nbsp;"inserter",&nbsp;position&nbsp;=&nbsp;game.player.position,&nbsp;direction&nbsp;=&nbsp;defines.direction.north}</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.create_trivial_smoke"><div class="element-header"><span class="element-name">create_trivial_smoke{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  The smoke prototype name to create.</li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Where to create the smoke.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.create_particle"><div class="element-header"><span class="element-name">create_particle{name&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, movement&nbsp;=&nbsp;&hellip;, height&nbsp;=&nbsp;&hellip;, vertical_speed&nbsp;=&nbsp;&hellip;, frame_speed&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Creates a particle at the given location
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  The particle name.</li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Where to create the particle.</li><li ><span class="param-name">movement</span> :: <span class="param-type"><a href="Concepts.html#Vector">Vector</a></span></li><li ><span class="param-name">height</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li><li ><span class="param-name">vertical_speed</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li><li ><span class="param-name">frame_speed</span> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.create_unit_group"><div class="element-header"><span class="element-name">create_unit_group{position&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="LuaUnitGroup.html">LuaUnitGroup</a></span></span></span></div><div class="element-content"><p > Create a new unit group at a given position.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Initial position of the new unit group.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  Force of the new unit group. Defaults to <code >"enemy"</code>.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.build_enemy_base"><div class="element-header"><span class="element-name">build_enemy_base(position, unit_count, force)</span></div><div class="element-content"><p > Send a group to build a new base.</p><p > </p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Location of the new base.</div><div ><span class="param-name">unit_count</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>:  Number of biters to send for the base-building task.</div><div ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  Force the new base will belong to. Defaults to enemy.</div></div></div><div class="notes"><div class="note"><strong >Note: </strong> The specified force must be AI-controlled; i.e. <code >force.ai_controllable</code> must be <code >true</code>.</div></div></div></div>
<div class="element" id="LuaSurface.get_tile"><div class="element-header"><span class="element-name">get_tile(x, y) &rarr; <span class="return-type"><span class="param-type"><a href="LuaTile.html">LuaTile</a></span></span></span></div><div class="element-content"><p > Get the tile at a given position.</p><p > </p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">x</span> :: <span class="param-type"><a href="Builtin-Types.html#int">int</a></span></div><div ><span class="param-name">y</span> :: <span class="param-type"><a href="Builtin-Types.html#int">int</a></span></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> The input position params can also be a single tile position.</div></div></div></div>
<div class="element" id="LuaSurface.set_tiles"><div class="element-header"><span class="element-name">set_tiles(tiles, correct_tiles, remove_colliding_entities, remove_colliding_decoratives, raise_event)</span></div><div class="element-content"><p > Set tiles at specified locations. Can automatically correct the edges around modified tiles.</p><p > Placing a <a href="LuaTilePrototype.html#LuaTilePrototype.mineable_properties"> mineable</a> tile on top of a non-mineable one will
 turn the latter into the <a href="LuaTile.html#LuaTile.hidden_tile">LuaTile::hidden_tile</a> for that tile. Placing a mineable tile on a mineable one
 or a non-mineable tile on a non-mineable one will not modify the hidden tile. This restriction can however
 be circumvented by using <a href="LuaSurface.html#LuaSurface.set_hidden_tile">LuaSurface::set_hidden_tile</a>.</p><p > </p><p > </p><p > </p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">tiles</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#Tile">Tile</a></span>]</span></div><div ><span class="param-name">correct_tiles</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If <code >false</code>, the correction logic is not applied to the changed tiles. Defaults to <code >true</code>.</div><div ><span class="param-name">remove_colliding_entities</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> or <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span> <span class="opt"> (optional)</span>:  <code >true</code>, <code >false</code>, or <code >abort_on_collision</code>. Defaults to <code >true</code>.</div><div ><span class="param-name">remove_colliding_decoratives</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  <code >true</code> or <code >false</code>. Defaults to <code >true</code>.</div><div ><span class="param-name">raise_event</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  <code >true</code> or <code >false</code>. Defaults to <code >false</code>.</div></div></div><div class="notes"><div class="note"><strong >Note: </strong> It is recommended to call this method once for all the tiles you want to change rather
       than calling it individually for every tile. As the tile correction is used after every
       step, calling it one by one could cause the tile correction logic to redo some of the
       changes. Also, many small API calls are generally more performance intensive than one big one.</div></div></div></div>
<div class="element" id="LuaSurface.pollute"><div class="element-header"><span class="element-name">pollute(source, amount)</span></div><div class="element-content"><p > Spawn pollution at the given position.</p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">source</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Where to spawn the pollution.</div><div ><span class="param-name">amount</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span>:  How much pollution to add.</div></div></div></div></div>
<div class="element" id="LuaSurface.get_chunks"><div class="element-header"><span class="element-name">get_chunks() &rarr; <span class="return-type"><span class="param-type"><a href="LuaChunkIterator.html">LuaChunkIterator</a></span></span></span></div><div class="element-content"><p > Get an iterator going over every chunk on this surface.</p><p > </p></div></div>
<div class="element" id="LuaSurface.is_chunk_generated"><div class="element-header"><span class="element-name">is_chunk_generated(position) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></div><div class="element-content"><p > Is a given chunk generated?</p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span>:  The chunk&#x27;s position.</div></div></div></div></div>
<div class="element" id="LuaSurface.request_to_generate_chunks"><div class="element-header"><span class="element-name">request_to_generate_chunks(position, radius)</span></div><div class="element-content"><p > Request that the game&#x27;s map generator generate chunks at the given position
 for the given radius on this surface.</p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  Where to generate the new chunks.</div><div ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>:  The chunk radius from <code >position</code> to generate new chunks in.</div></div></div></div></div>
<div class="element" id="LuaSurface.force_generate_chunk_requests"><div class="element-header"><span class="element-name">force_generate_chunk_requests()</span></div><div class="element-content"><p > Blocks and generates all chunks that have been requested using all available threads.
</p></div></div>
<div class="element" id="LuaSurface.set_chunk_generated_status"><div class="element-header"><span class="element-name">set_chunk_generated_status(position, status)</span></div><div class="element-content"><p > Set generated status of a chunk. Useful when copying chunks.</p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span>:  The chunk&#x27;s position.</div><div ><span class="param-name">status</span> :: <span class="param-type"><a href="defines.html#defines.chunk_generated_status">defines.chunk_generated_status</a></span>:  The chunk&#x27;s new status.</div></div></div></div></div>
<div class="element" id="LuaSurface.find_logistic_network_by_position"><div class="element-header"><span class="element-name">find_logistic_network_by_position(position, force) &rarr; <span class="return-type"><span class="param-type"><a href="LuaLogisticNetwork.html">LuaLogisticNetwork</a></span></span></span></div><div class="element-content"><p > Find the logistic network that covers a given position.</p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span></div><div ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>:  Force the logistic network should belong to.</div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The found network or <code >nil</code> if no such network was found.</div></div></div></div>
<div class="element" id="LuaSurface.find_logistic_networks_by_construction_area"><div class="element-header"><span class="element-name">find_logistic_networks_by_construction_area(position, force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaLogisticNetwork.html">LuaLogisticNetwork</a></span>]</span></span></span></div><div class="element-content"><p > Finds all of the logistics networks whose construction area intersects with the given position.</p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span></div><div ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>:  Force the logistic networks should belong to.</div></div></div></div></div>
<div class="element" id="LuaSurface.deconstruct_area"><div class="element-header"><span class="element-name">deconstruct_area{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Place a deconstruction request.
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  The area to mark for deconstruction.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>:  The force whose bots should perform the deconstruction.</li><li ><span class="param-name">player</span> :: <span class="param-type"><a href="Concepts.html#PlayerIdentification">PlayerIdentification</a></span> <span class="opt"> (optional)</span>:  The player to set the last_user to if any.</li><li ><span class="param-name">skip_fog_of_war</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If chunks covered by fog-of-war are skipped.</li><li ><span class="param-name">item</span> :: <span class="param-type"><a href="LuaItemStack.html">LuaItemStack</a></span> <span class="opt"> (optional)</span>:  The deconstruction item to use if any.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.cancel_deconstruct_area"><div class="element-header"><span class="element-name">cancel_deconstruct_area{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Cancel a deconstruction order.
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  The area to cancel deconstruction orders in.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>:  The force whose deconstruction orders to cancel.</li><li ><span class="param-name">player</span> :: <span class="param-type"><a href="Concepts.html#PlayerIdentification">PlayerIdentification</a></span> <span class="opt"> (optional)</span>:  The player to set the last_user to if any.</li><li ><span class="param-name">skip_fog_of_war</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If chunks covered by fog-of-war are skipped.</li><li ><span class="param-name">item</span> :: <span class="param-type"><a href="LuaItemStack.html">LuaItemStack</a></span> <span class="opt"> (optional)</span>:  The deconstruction item to use if any.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.upgrade_area"><div class="element-header"><span class="element-name">upgrade_area{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Place an upgrade request.
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  The area to mark for upgrade.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>:  The force whose bots should perform the upgrade.</li><li ><span class="param-name">player</span> :: <span class="param-type"><a href="Concepts.html#PlayerIdentification">PlayerIdentification</a></span> <span class="opt"> (optional)</span>:  The player to set the last_user to if any.</li><li ><span class="param-name">skip_fog_of_war</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If chunks covered by fog-of-war are skipped.</li><li ><span class="param-name">item</span> :: <span class="param-type"><a href="LuaItemStack.html">LuaItemStack</a></span>:  The upgrade item to use.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.cancel_upgrade_area"><div class="element-header"><span class="element-name">cancel_upgrade_area{area&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, player&nbsp;=&nbsp;&hellip;, skip_fog_of_war&nbsp;=&nbsp;&hellip;, item&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Cancel a upgrade order.
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  The area to cancel upgrade orders in.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>:  The force whose upgrade orders to cancel.</li><li ><span class="param-name">player</span> :: <span class="param-type"><a href="Concepts.html#PlayerIdentification">PlayerIdentification</a></span> <span class="opt"> (optional)</span>:  The player to set the last_user to if any.</li><li ><span class="param-name">skip_fog_of_war</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If chunks covered by fog-of-war are skipped.</li><li ><span class="param-name">item</span> :: <span class="param-type"><a href="LuaItemStack.html">LuaItemStack</a></span> <span class="opt"> (optional)</span>:  The upgrade item to use if any.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.get_hidden_tile"><div class="element-header"><span class="element-name">get_hidden_tile(position) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span></span></div><div class="element-content"><p > </p><p > </p><p > The hidden tile name or <code >nil</code> if there isn&#x27;t one for the given position.
</p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#TilePosition">TilePosition</a></span>:  The tile position.</div></div></div></div></div>
<div class="element" id="LuaSurface.set_hidden_tile"><div class="element-header"><span class="element-name">set_hidden_tile(position, tile)</span></div><div class="element-content"><p > Set the hidden tile for the specified position. While during normal gameplay only
 <a href="LuaTilePrototype.html#LuaTilePrototype.mineable_properties"> non-mineable</a> tiles can become hidden,
 this method allows any kind of tile to be set as the hidden one.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#TilePosition">TilePosition</a></span>:  The tile position.</div><div ><span class="param-name">tile</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type"><a href="LuaTilePrototype.html">LuaTilePrototype</a></span></span>:  The new hidden tile or <code >nil</code> to clear the hidden tile.</div></div></div></div></div>
<div class="element" id="LuaSurface.get_connected_tiles"><div class="element-header"><span class="element-name">get_connected_tiles(position, tiles) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#Position">Position</a></span>]</span></span></span></div><div class="element-content"><p > Gets all tiles of the given types that are connected horizontally or vertically to the given tile position including the given tile position.
 </p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  The tile position to start at.</div><div ><span class="param-name">tiles</span> :: <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span>:  The tiles to search for.</div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The resulting set of tiles.</div></div><div class="notes"><div class="note"><strong >Note: </strong> This won&#x27;t find tiles in non-generated chunks.</div></div></div></div>
<div class="element" id="LuaSurface.delete_chunk"><div class="element-header"><span class="element-name">delete_chunk(position)</span></div><div class="element-content"><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span>:  The chunk position to delete</div></div></div><div class="notes"><div class="note"><strong >Note: </strong> This won&#x27;t delete the chunk immediately. Chunks are deleted at the end of the current tick.</div></div></div></div>
<div class="element" id="LuaSurface.regenerate_entity"><div class="element-header"><span class="element-name">regenerate_entity(entities, chunks)</span></div><div class="element-content"><p > Regenerate autoplacement of some entities on this surface. This can be used to autoplace newly-added entities.</p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">entities</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span>: 
   Prototype names of entity or entities to autoplace. When <code >nil</code> all entities with an autoplace are used.</div><div ><span class="param-name">chunks</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span>]</span> <span class="opt"> (optional)</span>: 
   The chunk positions to regenerate the entities on. If not given all chunks are regenerated. Note chunks with status &lt; entities are ignored.</div></div></div><div class="notes"><div class="note"><strong >Note: </strong> All specified entity prototypes must be autoplacable. If nothing is given all entities are generated on all chunks.</div></div></div></div>
<div class="element" id="LuaSurface.regenerate_decorative"><div class="element-header"><span class="element-name">regenerate_decorative(decoratives, chunks)</span></div><div class="element-content"><p > Regenerate autoplacement of some decoratives on this surface. This can be used to autoplace newly-added decoratives.</p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">decoratives</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span>: 
   Prototype names of decorative or decoratives to autoplace. When <code >nil</code> all decoratives with an autoplace are used.</div><div ><span class="param-name">chunks</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span>]</span> <span class="opt"> (optional)</span>: 
   The chunk positions to regenerate the entities on. If not given all chunks are regenerated. Note chunks with status &lt; entities are ignored.</div></div></div><div class="notes"><div class="note"><strong >Note: </strong> All specified decorative prototypes must be autoplacable. If nothing is given all decoratives are generated on all chunks.</div></div></div></div>
<div class="element" id="LuaSurface.print"><div class="element-header"><span class="element-name">print(message, color)</span></div><div class="element-content"><p > Print text to the chat console of all players on this surface.</p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">message</span> :: <span class="param-type"><a href="Concepts.html#LocalisedString">LocalisedString</a></span></div><div ><span class="param-name">color</span> :: <span class="param-type"><a href="Concepts.html#Color">Color</a></span> <span class="opt"> (optional)</span></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> Messages that are identical to a message sent in the last 60 ticks are not printed again.</div></div></div></div>
<div class="element" id="LuaSurface.destroy_decoratives"><div class="element-header"><span class="element-name">destroy_decoratives{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Removes all decoratives from the given area.
 If no area and no position are given, then the entire surface is searched.</p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#TilePosition">TilePosition</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span> or <span class="param-type"><a href="LuaDecorativePrototype.html">LuaDecorativePrototype</a></span> or <span class="param-type">array[<span class="param-type"><a href="LuaDecorativePrototype.html">LuaDecorativePrototype</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">limit</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">invert</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the filters should be inverted.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.create_decoratives"><div class="element-header"><span class="element-name">create_decoratives{check_collision&nbsp;=&nbsp;&hellip;, decoratives&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Adds the given decoratives to the surface.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">check_collision</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If collision should be checked against entities/tiles.</li><li ><span class="param-name">decoratives</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#Decorative">Decorative</a></span>]</span></li></ul></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> This will merge decoratives of the same type that already exist effectively increasing the &quot;amount&quot; field.</div></div></div></div>
<div class="element" id="LuaSurface.find_decoratives_filtered"><div class="element-header"><span class="element-name">find_decoratives_filtered{area&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, name&nbsp;=&nbsp;&hellip;, limit&nbsp;=&nbsp;&hellip;, invert&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#DecorativeResult">DecorativeResult</a></span>]</span></span></span></div><div class="element-content"><p > Find decoratives of a given name in a given area.</p><p > If no filters are given, returns all decoratives in the search area.
   If multiple filters are specified, returns only decoratives matching every given filter.
   If no area and no position are given, the entire surface is searched.</p><p > </p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#TilePosition">TilePosition</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span> or <span class="param-type"><a href="LuaDecorativePrototype.html">LuaDecorativePrototype</a></span> or <span class="param-type">array[<span class="param-type"><a href="LuaDecorativePrototype.html">LuaDecorativePrototype</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">limit</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">invert</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the filters should be inverted.</li></ul></div></div></div><div class="example"><div class="example-header">Example</div>
   <div class="block-code-container"><code class="block">   game.surfaces[1].find_decoratives_filtered{area&nbsp;=&nbsp;{{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}},&nbsp;name&nbsp;=&nbsp;"sand-decal"}&nbsp;--&nbsp;gets&nbsp;all&nbsp;sand-decals&nbsp;in&nbsp;the&nbsp;rectangle<br/>
   game.surfaces[1].find_decoratives_filtered{area&nbsp;=&nbsp;{{-10,&nbsp;-10},&nbsp;{10,&nbsp;10}},&nbsp;limit&nbsp;=&nbsp;5}&nbsp;&nbsp;--&nbsp;gets&nbsp;the&nbsp;first&nbsp;5&nbsp;decoratives&nbsp;in&nbsp;the&nbsp;rectangle</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.get_trains"><div class="element-header"><span class="element-name">get_trains(force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaTrain.html">LuaTrain</a></span>]</span></span></span></div><div class="element-content"><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span>:  If given only trains matching this force are returned.</div></div></div></div></div>
<div class="element" id="LuaSurface.clear_pollution"><div class="element-header"><span class="element-name">clear_pollution()</span></div><div class="element-content"><p > Clears all pollution on this surface.
</p></div></div>
<div class="element" id="LuaSurface.play_sound"><div class="element-header"><span class="element-name">play_sound{path&nbsp;=&nbsp;&hellip;, position&nbsp;=&nbsp;&hellip;, volume_modifier&nbsp;=&nbsp;&hellip;, override_sound_type&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Play a sound for every player on this surface.</p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">path</span> :: <span class="param-type"><a href="Concepts.html#SoundPath">SoundPath</a></span>:  The sound to play.</li><li ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span> <span class="opt"> (optional)</span>:  Where the sound should be played. If not given, it&#x27;s played at the current
     position of each player.</li><li ><span class="param-name">volume_modifier</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span> <span class="opt"> (optional)</span>:  The volume of the sound to play. Must be between 0 and 1 inclusive.</li><li ><span class="param-name">override_sound_type</span> :: <span class="param-type"><a href="Concepts.html#SoundType">SoundType</a></span> <span class="opt"> (optional)</span>:  The volume mixer to play the sound through. Defaults to the
     default mixer for the given sound type.</li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.get_resource_counts"><div class="element-header"><span class="element-name">get_resource_counts() &rarr; <span class="return-type"><span class="param-type">dictionary[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span> &rarr; <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>]</span></span></span></div><div class="element-content"><p > Gets the resource amount of all resources on this surface
 </p></div></div>
<div class="element" id="LuaSurface.get_random_chunk"><div class="element-header"><span class="element-name">get_random_chunk() &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span></span></span></div><div class="element-content"><p > Gets a random generated chunk position or 0,0 if no chunks have been generated on this surface.
 </p></div></div>
<div class="element" id="LuaSurface.clone_area"><div class="element-header"><span class="element-name">clone_area{source_area&nbsp;=&nbsp;&hellip;, destination_area&nbsp;=&nbsp;&hellip;, destination_surface&nbsp;=&nbsp;&hellip;, destination_force&nbsp;=&nbsp;&hellip;, clone_tiles&nbsp;=&nbsp;&hellip;, clone_entities&nbsp;=&nbsp;&hellip;, clone_decoratives&nbsp;=&nbsp;&hellip;, clear_destination_entities&nbsp;=&nbsp;&hellip;, clear_destination_decoratives&nbsp;=&nbsp;&hellip;, expand_map&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Clones the given area.
 </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">source_area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span></li><li ><span class="param-name">destination_area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span></li><li ><span class="param-name">destination_surface</span> :: <span class="param-type"><a href="Concepts.html#SurfaceIdentification">SurfaceIdentification</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">destination_force</span> :: <span class="param-type"><span class="param-type"><a href="LuaForce.html">LuaForce</a></span> or <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">clone_tiles</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If tiles should be cloned</li><li ><span class="param-name">clone_entities</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If entities should be cloned</li><li ><span class="param-name">clone_decoratives</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If decoratives should be cloned</li><li ><span class="param-name">clear_destination_entities</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the destination entities should be cleared</li><li ><span class="param-name">clear_destination_decoratives</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the destination decoratives should be cleared</li><li ><span class="param-name">expand_map</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the destination surface should be expanded when destination_area is outside current bounds. Default false.</li><li ><span class="param-name">create_build_effect_smoke</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true, the building effect smoke will be shown around the new entities.</li></ul></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> <a href="defines.html#defines.events.on_entity_cloned">defines.events.on_entity_cloned</a> is raised for each entity, and then <a href="defines.html#defines.events.on_area_cloned">defines.events.on_area_cloned</a> is raised.</div><div class="note"><strong >Note: </strong> Entities are cloned in an order such that they can always be created, eg rails before trains.</div></div></div></div>
<div class="element" id="LuaSurface.clone_brush"><div class="element-header"><span class="element-name">clone_brush{source_offset&nbsp;=&nbsp;&hellip;, destination_offset&nbsp;=&nbsp;&hellip;, source_positions&nbsp;=&nbsp;&hellip;, destination_surface&nbsp;=&nbsp;&hellip;, destination_force&nbsp;=&nbsp;&hellip;, clone_tiles&nbsp;=&nbsp;&hellip;, clone_entities&nbsp;=&nbsp;&hellip;, clone_decoratives&nbsp;=&nbsp;&hellip;, clear_destination_entities&nbsp;=&nbsp;&hellip;, clear_destination_decoratives&nbsp;=&nbsp;&hellip;, expand_map&nbsp;=&nbsp;&hellip;, manual_collision_mode&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Clones the given area.
 </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">source_offset</span> :: <span class="param-type"><a href="Concepts.html#TilePosition">TilePosition</a></span></li><li ><span class="param-name">destination_offset</span> :: <span class="param-type"><a href="Concepts.html#TilePosition">TilePosition</a></span></li><li ><span class="param-name">source_positions</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#TilePosition">TilePosition</a></span>]</span></li><li ><span class="param-name">destination_surface</span> :: <span class="param-type"><a href="Concepts.html#SurfaceIdentification">SurfaceIdentification</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">destination_force</span> :: <span class="param-type"><span class="param-type"><a href="LuaForce.html">LuaForce</a></span> or <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">clone_tiles</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If tiles should be cloned</li><li ><span class="param-name">clone_entities</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If entities should be cloned</li><li ><span class="param-name">clone_decoratives</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If decoratives should be cloned</li><li ><span class="param-name">clear_destination_entities</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the destination entities should be cleared</li><li ><span class="param-name">clear_destination_decoratives</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the destination decoratives should be cleared</li><li ><span class="param-name">expand_map</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If the destination surface should be expanded when destination_area is outside current bounds. Default false.</li><li ><span class="param-name">manual_collision_mode</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If manual-style collision checks should be done.</li><li ><span class="param-name">create_build_effect_smoke</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true, the building effect smoke will be shown around the new entities.</li></ul></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> <a href="defines.html#defines.events.on_entity_cloned">defines.events.on_entity_cloned</a> is raised for each entity, and then <a href="defines.html#defines.events.on_area_cloned">defines.events.on_area_cloned</a> is raised.</div><div class="note"><strong >Note: </strong> Entities are cloned in an order such that they can always be created, eg rails before trains.</div></div></div></div>
<div class="element" id="LuaSurface.clone_entities"><div class="element-header"><span class="element-name">clone_entities{entities&nbsp;=&nbsp;&hellip;, destination_offset&nbsp;=&nbsp;&hellip;, destination_surface&nbsp;=&nbsp;&hellip;, destination_force&nbsp;=&nbsp;&hellip;, snap_to_grid&nbsp;=&nbsp;&hellip;, create_build_effect_smoke&nbsp;=&nbsp;&hellip;}</span></div><div class="element-content"><p > Clones the given entities.
 </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">entities</span> :: <span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></li><li ><span class="param-name">destination_offset</span> :: <span class="param-type"><a href="Concepts.html#Vector">Vector</a></span></li><li ><span class="param-name">destination_surface</span> :: <span class="param-type"><a href="Concepts.html#SurfaceIdentification">SurfaceIdentification</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">destination_force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">snap_to_grid</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">create_build_effect_smoke</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  If true, the building effect smoke will be shown around the new entities.</li></ul></div></div></div><div class="notes"><div class="note"><strong >Note: </strong> <a href="defines.html#defines.events.on_entity_cloned">defines.events.on_entity_cloned</a> is raised for each entity.</div><div class="note"><strong >Note: </strong> Entities are cloned in an order such that they can always be created, eg rails before trains.</div></div></div></div>
<div class="element" id="LuaSurface.clear"><div class="element-header"><span class="element-name">clear(ignore_characters)</span></div><div class="element-content"><p > Clears this surface deleting all entities and chunks on it.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">ignore_characters</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  Whether characters on this surface that are connected to or associated with players should be ignored (not destroyed).</div></div></div><div class="notes"><div class="note"><strong >Note: </strong> This won&#x27;t clear the surface immediately. It will be cleared at the end of the current tick.</div></div></div></div>
<div class="element" id="LuaSurface.request_path"><div class="element-header"><span class="element-name">request_path{bounding_box&nbsp;=&nbsp;&hellip;, collision_mask&nbsp;=&nbsp;&hellip;, start&nbsp;=&nbsp;&hellip;, goal&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;, radius&nbsp;=&nbsp;&hellip;, pathfind_flags&nbsp;=&nbsp;&hellip;, can_open_gates&nbsp;=&nbsp;&hellip;, path_resolution_modifier&nbsp;=&nbsp;&hellip;, entity_to_ignore&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></div><div class="element-content"><p > Generates a path with the specified constraints (as an array of <a href="Concepts.html#PathfinderWaypoint"> PathfinderWaypoints</a>) using the
   unit pathfinding algorithm. This path can be used to emulate pathing behavior by script for non-unit entities.
   If you want to command actual units to move, use the <a href="LuaEntity.html#LuaEntity.set_command">LuaEntity::set_command</a> functionality instead.</p><p > The resulting path is ultimately returned asynchronously via <a href="events.html#on_script_path_request_finished">on_script_path_request_finished</a>.</p><p > </p><p >
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table with the following fields:<ul class="field-list"><li ><span class="param-name">bounding_box</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  The dimensions of the object that&#x27;s supposed to travel the path.</li><li ><span class="param-name">collision_mask</span> :: <span class="param-type"><span class="param-type"><a href="Concepts.html#CollisionMask">CollisionMask</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span>:  The list of masks the <code >bounding_box</code> collides with.</li><li ><span class="param-name">start</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  The position from which to start pathfinding.</li><li ><span class="param-name">goal</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  The position to find a path to.</li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span>:  The force for which to generate the path, determining which gates can be opened
     for example.</li><li ><span class="param-name">radius</span> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span> <span class="opt"> (optional)</span>:  How close the pathfinder needs to get to its <code >goal</code> (in tiles). Defaults to <code >1</code>.</li><li ><span class="param-name">pathfind_flags</span> :: <span class="param-type"><a href="Concepts.html#PathfinderFlags">PathfinderFlags</a></span> <span class="opt"> (optional)</span>:  Flags that affect pathfinder behavior.</li><li ><span class="param-name">can_open_gates</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span> <span class="opt"> (optional)</span>:  Whether the path request can open gates. Defaults to <code >false</code>.</li><li ><span class="param-name">path_resolution_modifier</span> :: <span class="param-type"><a href="Builtin-Types.html#int">int</a></span> <span class="opt"> (optional)</span>:  Defines how coarse the pathfinder&#x27;s grid is. Smaller values mean
     a coarser grid (negative numbers allowed). Defaults to <code >0</code>.</li><li ><span class="param-name">entity_to_ignore</span> :: <span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span> <span class="opt"> (optional)</span>:  Makes the pathfinder ignore collisions with this entity if it is given.</li></ul></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> A unique handle to identify this call when <a href="events.html#on_script_path_request_finished">on_script_path_request_finished</a> fires.</div></div></div></div>
<div class="element" id="LuaSurface.get_script_areas"><div class="element-header"><span class="element-name">get_script_areas(name) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#ScriptArea">ScriptArea</a></span>]</span></span></span></div><div class="element-content"><p > Gets the script areas that match the given name or if no name is given all areas are returned.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span> <span class="opt"> (optional)</span></div></div></div></div></div>
<div class="element" id="LuaSurface.get_script_area"><div class="element-header"><span class="element-name">get_script_area(key) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#ScriptArea">ScriptArea</a></span></span></span></div><div class="element-content"><p > Gets the first script area by name or id.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">key</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span> <span class="opt"> (optional)</span>:  The name or id of the area to get.</div></div></div></div></div>
<div class="element" id="LuaSurface.edit_script_area"><div class="element-header"><span class="element-name">edit_script_area(id, area)</span></div><div class="element-content"><p > Sets the given script area to the new values.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">id</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>:  The area to edit.</div><div ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#ScriptArea">ScriptArea</a></span></div></div></div></div></div>
<div class="element" id="LuaSurface.add_script_area"><div class="element-header"><span class="element-name">add_script_area(area) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></div><div class="element-content"><p > Adds the given script area.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#ScriptArea">ScriptArea</a></span></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The id of the created area.</div></div></div></div>
<div class="element" id="LuaSurface.remove_script_area"><div class="element-header"><span class="element-name">remove_script_area(id) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></div><div class="element-content"><p > Removes the given script area.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">id</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> If the area was actually removed. False when it didn&#x27;t exist.</div></div></div></div>
<div class="element" id="LuaSurface.get_script_positions"><div class="element-header"><span class="element-name">get_script_positions(name) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="Concepts.html#ScriptPosition">ScriptPosition</a></span>]</span></span></span></div><div class="element-content"><p > Gets the script positions that match the given name or if no name is given all positions are returned.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">name</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span> <span class="opt"> (optional)</span></div></div></div></div></div>
<div class="element" id="LuaSurface.get_script_position"><div class="element-header"><span class="element-name">get_script_position(key) &rarr; <span class="return-type"><span class="param-type"><a href="Concepts.html#ScriptPosition">ScriptPosition</a></span></span></span></div><div class="element-content"><p > Gets the first script position by name or id.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">key</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span> <span class="opt"> (optional)</span>:  The name or id of the position to get.</div></div></div></div></div>
<div class="element" id="LuaSurface.edit_script_position"><div class="element-header"><span class="element-name">edit_script_position(id, area)</span></div><div class="element-content"><p > Sets the given script position to the new values.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">id</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span>:  The position to edit.</div><div ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#ScriptPosition">ScriptPosition</a></span></div></div></div></div></div>
<div class="element" id="LuaSurface.add_script_position"><div class="element-header"><span class="element-name">add_script_position(area) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span></span></div><div class="element-content"><p > Adds the given script position.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#ScriptPosition">ScriptPosition</a></span></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> The id of the created position.</div></div></div></div>
<div class="element" id="LuaSurface.remove_script_position"><div class="element-header"><span class="element-name">remove_script_position(id) &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span></span></div><div class="element-content"><p > Removes the given script position.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">id</span> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> If the position was actually removed. False when it didn&#x27;t exist.</div></div></div></div>
<div class="element" id="LuaSurface.get_map_exchange_string"><div class="element-header"><span class="element-name">get_map_exchange_string() &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span></span></div><div class="element-content"><p > Gets the map exchange string for the current map generation settings of this surface.
 </p></div></div>
<div class="element" id="LuaSurface.get_starting_area_radius"><div class="element-header"><span class="element-name">get_starting_area_radius() &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span></span></div><div class="element-content"><p > Gets the starting area radius of this surface.
 </p></div></div>
<div class="element" id="LuaSurface.get_closest"><div class="element-header"><span class="element-name">get_closest(position, entities) &rarr; <span class="return-type"><span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span></span></span></div><div class="element-content"><p > Gets the closest entity in the list to this position.
 </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span></div><div ><span class="param-name">entities</span> :: <span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span>:  The Entities to check</div></div></div></div></div>
<div class="element" id="LuaSurface.get_train_stops"><div class="element-header"><span class="element-name">get_train_stops{name&nbsp;=&nbsp;&hellip;, force&nbsp;=&nbsp;&hellip;} &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></div><div class="element-content"><p > Gets train stops matching the given filters.
 </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div >Table (optional) with the following fields:<ul class="field-list"><li ><span class="param-name">name</span> :: <span class="param-type"><span class="param-type"><a href="Builtin-Types.html#string">string</a></span> or <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span></span> <span class="opt"> (optional)</span></li><li ><span class="param-name">force</span> :: <span class="param-type"><a href="Concepts.html#ForceIdentification">ForceIdentification</a></span> <span class="opt"> (optional)</span></li></ul></div></div></div></div></div>
<div class="element" id="LuaSurface.get_total_pollution"><div class="element-header"><span class="element-name">get_total_pollution() &rarr; <span class="return-type"><span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span></span></div><div class="element-content"><p > Gets the total amount of pollution on the surface by iterating over all of the chunks containing pollution.
 </p></div></div>
<div class="element" id="LuaSurface.entity_prototype_collides"><div class="element-header"><span class="element-name">entity_prototype_collides(prototype, position, use_map_generation_bounding_box, direction)</span></div><div class="element-content"><p > </p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">prototype</span> :: <span class="param-type"><a href="Concepts.html#EntityPrototypeIdentification">EntityPrototypeIdentification</a></span>:  The entity prototype to check</div><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  The position to check</div><div ><span class="param-name">use_map_generation_bounding_box</span> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span>:  If the map generation bounding box should be used instead of the collision bounding box</div><div ><span class="param-name">direction</span> :: <span class="param-type"><a href="defines.html#defines.direction">defines.direction</a></span> <span class="opt"> (optional)</span></div></div></div></div></div>
<div class="element" id="LuaSurface.decorative_prototype_collides"><div class="element-header"><span class="element-name">decorative_prototype_collides(prototype, position)</span></div><div class="element-content"><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">prototype</span> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span>:  The decorative prototype to check</div><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#Position">Position</a></span>:  The position to check</div></div></div></div></div>
<div class="element" id="LuaSurface.calculate_tile_properties"><div class="element-header"><span class="element-name">calculate_tile_properties(property_names, positions) &rarr; <span class="return-type"><span class="param-type">dictionary[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span> &rarr; <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#double">double</a></span>]</span>]</span></span></span></div><div class="element-content"><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">property_names</span> :: <span class="param-type">array[<span class="param-type"><a href="Builtin-Types.html#string">string</a></span>]</span>:  Names of properties (e.g. &quot;elevation&quot;) to calculate</div><div ><span class="param-name">positions</span> :: <span class="param-type">array[<span class="param-type"><a href="Concepts.html#Position">Position</a></span>]</span>:  Positions for which to calculate property values</div></div></div><div class="detail"><div class="detail-header">Return value</div><div class="detail-content"> Table of property value lists, keyed by property name</div></div></div></div>

<div class="element" id="LuaSurface.get_entities_with_force"><div class="element-header"><span class="element-name">get_entities_with_force(position, force) &rarr; <span class="return-type"><span class="param-type">array[<span class="param-type"><a href="LuaEntity.html">LuaEntity</a></span>]</span></span></span></div><div class="element-content"><p > Returns all the entities with force on this chunk for the given force.</p><p > </p><p > </p><p > </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">position</span> :: <span class="param-type"><a href="Concepts.html#ChunkPosition">ChunkPosition</a></span>:  The chunk&#x27;s position.</div><div ><span class="param-name">force</span> :: <span class="param-type"><span class="param-type"><a href="LuaForce.html">LuaForce</a></span> or <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span>:  Entities of this force will be returned.</div></div></div></div></div>

<div class="element" id="LuaSurface.build_checkerboard"><div class="element-header"><span class="element-name">build_checkerboard(area)</span></div><div class="element-content"><p > Sets the given area to the checkerboard lab tiles.
 </p><div class="detail"><div class="detail-header">Parameters</div><div class="detail-content"><div ><span class="param-name">area</span> :: <span class="param-type"><a href="Concepts.html#BoundingBox">BoundingBox</a></span>:  The tile area.</div></div></div></div></div><div class="element" id="LuaSurface.name"><div class="element-header"><span class="element-name">name</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#string">string</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > </p><p > The name of this surface. Names are unique among surfaces.
 </p><div class="notes"><div class="note"><strong >Note: </strong> the default surface can&#x27;t be renamed.</div></div></div></div>
<div class="element" id="LuaSurface.index"><div class="element-header"><span class="element-name">index</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span><span class="attribute-mode"> [Read-only]</span></div><div class="element-content"><p > </p><p > Unique ID associated with this surface.
</p></div></div>
<div class="element" id="LuaSurface.map_gen_settings"><div class="element-header"><span class="element-name">map_gen_settings</span><span class="attribute-type"> :: <span class="param-type"><a href="Concepts.html#MapGenSettings">MapGenSettings</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > </p><p > The generation settings for this surface. These can be modified to after surface generation, but note that this will
   not retroactively update the surface. To manually adjust it, <a href="LuaSurface.html#LuaSurface.regenerate_entity">LuaSurface::regenerate_entity</a>,
   <a href="LuaSurface.html#LuaSurface.regenerate_decorative">LuaSurface::regenerate_decorative</a> and <a href="LuaSurface.html#LuaSurface.delete_chunk">LuaSurface::delete_chunk</a> can be used.
</p></div></div>
<div class="element" id="LuaSurface.generate_with_lab_tiles"><div class="element-header"><span class="element-name">generate_with_lab_tiles</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > When set to true, new chunks will be generated with lab tiles, instead of using the surface&#x27;s map generation settings.
 </p></div></div>
<div class="element" id="LuaSurface.always_day"><div class="element-header"><span class="element-name">always_day</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > When set to true, the sun will always shine.
 </p></div></div>
<div class="element" id="LuaSurface.daytime"><div class="element-header"><span class="element-name">daytime</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > </p><p > Current time of day, as a number in range [0, 1).
</p></div></div>
<div class="element" id="LuaSurface.darkness"><div class="element-header"><span class="element-name">darkness</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#float">float</a></span></span><span class="attribute-mode"> [Read-only]</span></div><div class="element-content"><p > </p><p > Amount of darkness at the current time.
</p></div></div>
<div class="element" id="LuaSurface.wind_speed"><div class="element-header"><span class="element-name">wind_speed</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > </p><p > Current wind speed.
</p></div></div>
<div class="element" id="LuaSurface.wind_orientation"><div class="element-header"><span class="element-name">wind_orientation</span><span class="attribute-type"> :: <span class="param-type"><a href="Concepts.html#RealOrientation">RealOrientation</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > </p><p > Current wind direction.
</p></div></div>
<div class="element" id="LuaSurface.wind_orientation_change"><div class="element-header"><span class="element-name">wind_orientation_change</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > </p><p > Change in wind orientation per tick.
</p></div></div>
<div class="element" id="LuaSurface.peaceful_mode"><div class="element-header"><span class="element-name">peaceful_mode</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > </p><p > Is peaceful mode enabled on this surface?
</p></div></div>
<div class="element" id="LuaSurface.freeze_daytime"><div class="element-header"><span class="element-name">freeze_daytime</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > True if daytime is currently frozen.
 </p></div></div>
<div class="element" id="LuaSurface.ticks_per_day"><div class="element-header"><span class="element-name">ticks_per_day</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#uint">uint</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > The number of ticks per day for this surface.
 </p></div></div>
<div class="element" id="LuaSurface.dusk"><div class="element-header"><span class="element-name">dusk</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > The daytime when dusk starts.
 </p></div></div>
<div class="element" id="LuaSurface.dawn"><div class="element-header"><span class="element-name">dawn</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > The daytime when dawn starts.
 </p></div></div>
<div class="element" id="LuaSurface.evening"><div class="element-header"><span class="element-name">evening</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > The daytime when evening starts.
 </p></div></div>
<div class="element" id="LuaSurface.morning"><div class="element-header"><span class="element-name">morning</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > The daytime when morning starts.
 </p></div></div>
<div class="element" id="LuaSurface.solar_power_multiplier"><div class="element-header"><span class="element-name">solar_power_multiplier</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > The multiplier of solar power on this surface. Cannot be less than 0.
 </p><p > </p><div class="notes"><div class="note"><strong >Note: </strong> Solar equipment is still limited to its maximum power output.</div></div></div></div>
<div class="element" id="LuaSurface.min_brightness"><div class="element-header"><span class="element-name">min_brightness</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#double">double</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > The minimal brightness during the night. Default is <code >0.15</code>.
 The value has an effect on the game simalution only, it doesn&#x27;t have any effect on rendering.
 </p></div></div>
<div class="element" id="LuaSurface.brightness_visual_weights"><div class="element-header"><span class="element-name">brightness_visual_weights</span><span class="attribute-type"> :: <span class="param-type"><a href="Concepts.html#ColorModifier">ColorModifier</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > Defines how surface daytime brightness influences each color channel of the current color lookup table (LUT).</p><p > The LUT is multiplied by <code >((1 - weight) + brightness * weight)</code> and result is clamped to range [0, 1].</p><p > Default is <code >{0, 0, 0}</code>, which means no influence.</p><p > </p><p >
 </p><div class="example"><div class="example-header">Example</div>
   Makes night on the surface pitch black, assuming <a href="LuaSurface.html#LuaSurface.min_brightness">LuaSurface::min_brightness</a> being set to default value <code >0.15</code>.
   <div class="block-code-container"><code class="block">game.surfaces[1].brightness_visual_weights&nbsp;=&nbsp;{&nbsp;1&nbsp;/&nbsp;0.85,&nbsp;1&nbsp;/&nbsp;0.85,&nbsp;1&nbsp;/&nbsp;0.85&nbsp;}</code></div>
 </div></div></div>
<div class="element" id="LuaSurface.show_clouds"><div class="element-header"><span class="element-name">show_clouds</span><span class="attribute-type"> :: <span class="param-type"><a href="Builtin-Types.html#boolean">boolean</a></span></span><span class="attribute-mode"> [Read-Write]</span></div><div class="element-content"><p > If clouds are shown on this surface.
 </p><p > </p><div class="notes"><div class="note"><strong >Note: </strong> If false, clouds are never shown. If true the player must also have clouds enabled in graphics settings for them to be shown.</div></div></div></div></div></body></html>